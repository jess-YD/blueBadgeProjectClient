(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[420,38,74],{101:function(e,n,t){var o=t(109)("keys");var r=t(91);e.exports=function(e){return o[e]||(o[e]=r(e))}},109:function(e,n,t){var o=t(46);var r="__core-js_shared__";var a=o[r]||(o[r]={});e.exports=function(e){return a[e]||(a[e]={})}},110:function(e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},111:function(e,n){n.f={}.propertyIsEnumerable},114:function(e,n){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},115:function(e,n,t){var o=t(68);e.exports=function(e,n){if(!o(e))return e;var t,r;if(n&&"function"==typeof(t=e.toString)&&!o(r=t.call(e)))return r;if("function"==typeof(t=e.valueOf)&&!o(r=t.call(e)))return r;if(!n&&"function"==typeof(t=e.toString)&&!o(r=t.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},119:function(e,n,t){var o=t(58).f;var r=t(60);var a=t(43)("toStringTag");e.exports=function(e,n,t){e&&!r(e=t?e:e.prototype,a)&&o(e,a,{configurable:true,value:n})}},120:function(e,n,t){var o=t(96);e.exports=function(e){return Object(o(e))}},125:function(e,n,t){"use strict";var o=t(208)(true);t(155)(String,"String",function(e){this._t=String(e);this._i=0},function(){var e=this._t;var n=this._i;var t;if(n>=e.length)return{value:void 0,done:true};t=o(e,n);this._i+=t.length;return{value:t,done:false}})},126:function(e,n,t){var o=t(68);var r=t(46).document;var a=o(r)&&o(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},127:function(e,n){e.exports=true},132:function(e,n){n.f=Object.getOwnPropertySymbols},133:function(e,n,t){var o=t(114);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},136:function(e,n,t){e.exports=!t(56)&&!t(73)(function(){return 7!=Object.defineProperty(t(126)("div"),"a",{get:function(){return 7}}).a})},137:function(e,n,t){var o=t(60);var r=t(66);var a=t(182)(false);var i=t(101)("IE_PROTO");e.exports=function(e,n){var t=r(e);var s=0;var l=[];var c;for(c in t)c!=i&&o(t,c)&&l.push(c);while(n.length>s)o(t,c=n[s++])&&(~a(l,c)||l.push(c));return l}},146:function(e,n,t){var o=t(181);e.exports=function(e,n,t){o(e);if(void 0===n)return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,o){return e.call(n,t,o)};case 3:return function(t,o,r){return e.call(n,t,o,r)}}return function(){return e.apply(n,arguments)}}},148:function(e,n,t){t(220);var o=t(46);var r=t(64);var a=t(80);var i=t(43)("toStringTag");var s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(",");for(var l=0;l<s.length;l++){var c=s[l];var _=o[c];var u=_&&_.prototype;u&&!u[i]&&r(u,i,c);a[c]=a.Array}},154:function(e,n,t){var o=t(95);var r=Math.min;e.exports=function(e){return e>0?r(o(e),9007199254740991):0}},155:function(e,n,t){"use strict";var o=t(127);var r=t(86);var a=t(168);var i=t(64);var s=t(60);var l=t(80);var c=t(209);var _=t(119);var u=t(205);var d=t(43)("iterator");var f=!([].keys&&"next"in[].keys());var m="@@iterator";var p="keys";var g="values";var S=function(){return this};e.exports=function(e,n,t,h,T,v,b){c(t,n,h);var w=function(e){if(!f&&e in x)return x[e];switch(e){case p:return function n(){return new t(this,e)};case g:return function n(){return new t(this,e)}}return function n(){return new t(this,e)}};var y=n+" Iterator";var k=T==g;var j=false;var x=e.prototype;var O=x[d]||x[m]||T&&x[T];var E=!f&&O||w(T);var C=T?k?w("entries"):E:void 0;var M="Array"==n&&x.entries||O;var A,L,F;if(M){F=u(M.call(new e));if(F!==Object.prototype&&F.next){_(F,y,true);o||s(F,d)||i(F,d,S)}}if(k&&O&&O.name!==g){j=true;E=function e(){return O.call(this)}}o&&!b||!f&&!j&&x[d]||i(x,d,E);l[n]=E;l[y]=S;if(T){A={values:k?E:w(g),keys:v?E:w(p),entries:C};if(b)for(L in A)L in x||a(x,L,A[L]);else r(r.P+r.F*(f||j),n,A)}return A}},156:function(e,n,t){n.f=t(43)},157:function(e,n,t){var o=t(46);var r=t(52);var a=t(127);var i=t(156);var s=t(58).f;e.exports=function(e){var n=r.Symbol||(r.Symbol=a?{}:o.Symbol||{});"_"==e.charAt(0)||e in n||s(n,e,{value:i.f(e)})}},163:function(e,n,t){var o=t(71);var r=t(204);var a=t(110);var i=t(101)("IE_PROTO");var s=function(){};var l="prototype";var c=function(){var e=t(126)("iframe");var n=a.length;var o="<";var r=">";var i;e.style.display="none";t(210).appendChild(e);e.src="javascript:";i=e.contentWindow.document;i.open();i.write(o+"script"+r+"document.F=Object"+o+"/script"+r);i.close();c=i.F;while(n--)delete c[l][a[n]];return c()};e.exports=Object.create||function e(n,t){var a;if(null!==n){s[l]=o(n);a=new s;s[l]=null;a[i]=n}else a=c();return void 0===t?a:r(a,t)}},168:function(e,n,t){e.exports=t(64)},181:function(e,n){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},182:function(e,n,t){var o=t(66);var r=t(154);var a=t(183);e.exports=function(e){return function(n,t,i){var s=o(n);var l=r(s.length);var c=a(i,l);var _;if(e&&t!=t)while(l>c){_=s[c++];if(_!=_)return true}else for(;l>c;c++)if((e||c in s)&&s[c]===t)return e||c||0;return!e&&-1}}},183:function(e,n,t){var o=t(95);var r=Math.max;var a=Math.min;e.exports=function(e,n){e=o(e);return e<0?r(e+n,0):a(e,n)}},191:function(e,n,t){var o=t(137);var r=t(110).concat("length","prototype");n.f=Object.getOwnPropertyNames||function e(n){return o(n,r)}},192:function(e,n,t){var o=t(114);var r=t(43)("toStringTag");var a="Arguments"==o(function(){return arguments}());var i=function(e,n){try{return e[n]}catch(e){}};e.exports=function(e){var n,t,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=i(n=Object(e),r))?t:a?o(n):"Object"==(s=o(n))&&"function"==typeof n.callee?"Arguments":s}},204:function(e,n,t){var o=t(58);var r=t(71);var a=t(98);e.exports=t(56)?Object.defineProperties:function e(n,t){r(n);var i=a(t);var s=i.length;var l=0;var c;while(s>l)o.f(n,c=i[l++],t[c]);return n}},205:function(e,n,t){var o=t(60);var r=t(120);var a=t(101)("IE_PROTO");var i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){e=r(e);if(o(e,a))return e[a];if("function"==typeof e.constructor&&e instanceof e.constructor)return e.constructor.prototype;return e instanceof Object?i:null}},208:function(e,n,t){var o=t(95);var r=t(96);e.exports=function(e){return function(n,t){var a=String(r(n));var i=o(t);var s=a.length;var l,c;if(i<0||i>=s)return e?"":void 0;l=a.charCodeAt(i);return l<55296||l>56319||i+1===s||(c=a.charCodeAt(i+1))<56320||c>57343?e?a.charAt(i):l:e?a.slice(i,i+2):c-56320+(l-55296<<10)+65536}}},209:function(e,n,t){"use strict";var o=t(163);var r=t(83);var a=t(119);var i={};t(64)(i,t(43)("iterator"),function(){return this});e.exports=function(e,n,t){e.prototype=o(i,{next:r(1,t)});a(e,n+" Iterator")}},210:function(e,n,t){var o=t(46).document;e.exports=o&&o.documentElement},215:function(e,n,t){var o=t(192);var r=t(43)("iterator");var a=t(80);e.exports=t(52).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||a[o(e)]}},220:function(e,n,t){"use strict";var o=t(221);var r=t(222);var a=t(80);var i=t(66);e.exports=t(155)(Array,"Array",function(e,n){this._t=i(e);this._i=0;this._k=n},function(){var e=this._t;var n=this._k;var t=this._i++;if(!e||t>=e.length){this._t=void 0;return r(1)}if("keys"==n)return r(0,t);if("values"==n)return r(0,e[t]);return r(0,[t,e[t]])},"values");a.Arguments=a.Array;o("keys");o("values");o("entries")},221:function(e,n){e.exports=function(){}},222:function(e,n){e.exports=function(e,n){return{value:n,done:!!e}}},224:function(e,n,t){e.exports={default:t(248),__esModule:true}},2315:function(e,n){(function(){TS.registerModule("i18n",{onStart:function e(){TS.interop.i18n.getReverseKeyCodeMap();TS.prefs&&TS.prefs.keyboard_changed_sig.add(i);TS.generic_notification_banner&&!TS.boot_data.modernized_banners&&TS.generic_notification_banner.banner_to_show_sig.add(o);window.signals?TS.i18n.keyboard_changed_sig=new signals.Signal:TS.i18n.keyboard_changed_sig={add:function e(){},remove:function e(){},dispatch:function e(){}}},keyboard:function n(){if(!e)if(TS.interop.desktop.canAutoGetKeyboard()){e=TS.interop.i18n.normalizeKeyboardFromDesktop(desktop.app.getLocaleInformation().currentKeyboardLayout);desktop.app.onDidChangeKeyboardLayout(a)}else{if(!TS.prefs.prefs_loaded)return"us";e=TS.prefs.getPref("keyboard")||"us"}if("en-US"===e)return"us";return e},sendButtonEnabled:function e(){return TS.prefs&&TS.prefs.getPref("msg_input_send_btn")},setUpStaticTranslations:function e(){return r()},getStaticTranslation:function e(n,t){if(!s())return null;var o=TS.storage.fetchStaticTranslations();var r=_.get(o,"data."+t);if(!r||!r[n])return null;return r[n]}});var e;var n=0;var t=function e(){if(TS.client&&!TS.prefs.getPref("seen_locale_change_message")){if(window.desktop&&void 0===window.teamId&&n<100){n+=1;setTimeout(e,50);return}if(!window.desktop||window.desktop.reduxHelper&&window.desktop.reduxHelper.isSelectedTeam&&window.desktop.reduxHelper.isSelectedTeam())TS.interop.api.call("slackbot.sendLocalizationMessage");else{TS.prefs.setPrefLocal("seen_locale_change_message",2);TS.prefs.setPrefByAPI({name:"seen_locale_change_message",value:2})}}};var o=function e(n){if("i18n_japan_beta_send_btn_banner"===n.name){var t=function e(){var n=TS.generic_notification_banner.getPref("i18n_japan_beta_send_btn_banner_cta_count")+1;var t=Math.floor(Date.now()/1e3);TS.generic_notification_banner.setPrefs({i18n_japan_beta_send_btn_banner_cta_count:n,i18n_japan_beta_send_btn_banner_cta_last_ts:t});TS.prefs.msg_input_send_btn_changed_sig.remove(e);TS.prefs.msg_input_send_btn_auto_set_changed_sig.remove(e);TS.generic_notification_banner.is_showing&&TS.generic_notification_banner.close()};TS.prefs.msg_input_send_btn_changed_sig.add(t);TS.prefs.msg_input_send_btn_auto_set_changed_sig.add(t);var o=TS.interop.i18n.t("Just for Japan: a button for sending","send_btn")();var r=TS.interop.i18n.t('Send a message with a quick click, or by pressing {keys}</br>\t\t\tDon\u2018t like the change? You can always switch back in <button id="send_btn_link_prefs" class="{class}">your preferences</button>.',"send_btn","a24238c9e64b0da0daa15baf2c6d29478d3f1e8f")({keys:TS.interop.i18n.safeString('<span class="c-keyboard_key c-keyboard_key--slim">'+(TS.model.is_mac?"\u2318":"Ctrl")+'</span>\n\t\t\t<span class="c-keyboard_key c-keyboard_key--slim">Enter</span>'),class:"btn_link"});TS.generic_notification_banner.start({h1_copy:o,h2_copy:r,show_go_button:true,go_button_text:TS.interop.i18n.t("Got It","send_btn")(),onGo:t,show_go_link_button:false,show_close_button:false});$("#send_btn_link_prefs").on("click",function(){TS.ui.prefs_dialog.start("advanced","#msg_input_send_btn_label");t()})}};var r=function e(){if(s())return Promise.resolve();return TS.interop.api.call("i18n.translations.get").then(function(e){var n=e.data;if(!n||!n.ok){TS.error("Failed to fetch static i18n translations, recieved this response: ",e);return}TS.model.static_translations_cache_ts=n.cache_ts;TS.storage.storeStaticTranslations({data:n,cache_ts:TS.model.static_translations_cache_ts,locale:n.locale})})};var a=function n(t){e=TS.interop.i18n.normalizeKeyboardFromDesktop(t);TS.i18n.keyboard_changed_sig.dispatch()};var i=function n(){if(!TS.model.is_our_app){e=TS.prefs.getPref("keyboard");TS.i18n.keyboard_changed_sig.dispatch()}};var s=function e(){var n=TS.storage.fetchStaticTranslations();if(!n)return false;if(TS.model.static_translations_cache_ts!==n.cache_ts)return false;if(TS.interop.i18n.locale!==n.locale)return false;return true}})()},24:function(e,n,t){"use strict";n.__esModule=true;var o=t(412);var r=a(o);function a(e){return e&&e.__esModule?e:{default:e}}n.default=function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return(0,r.default)(e)}},248:function(e,n,t){t(249);e.exports=t(52).Object.assign},2486:function(e,n,t){"use strict";t.r(n);var o=t(3);var r=t.n(o);var a=t(40);var i=t.n(a);(function(){TS.registerModule("emoji",{onStart:function e(){T.forEach(function(e){TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(e.emoji_names)});TS.web&&TS.web.login_sig.add(TS.emoji.onLogin);TS.client&&TS.client.login_sig.add(TS.emoji.onLogin);TS.prefs.jumbomoji_changed_sig.add(b);var n=true;v=TS.utility.throttleFunc(v,3e3,n);window._&&(j=_.debounce(j,3e3,{leading:false,trailing:n}))},onLogin:function e(){b()},isValidName:function n(t){if(!t)return false;t=TS.emoji.stripWrappingColons(t).toLowerCase();if(TS.boot_data.feature_sonic_emoji){if(!TS.interop.emoji.isValidEmojiText(t))return false;return t}if("undefined"===typeof e[t])return false;return t},isEmojiNameSafe:function e(n){if(TS.boot_data.feature_sonic_emoji)return TS.interop.rules.emoji.isEmojiNameSafe(n);var t=TS.emoji.legacyGetColonsRx();if(!t||!t.source)return false;var o=":"+n+":";var r=new RegExp("^"+t.source+"$");return r.test(o)},substringMatchesName:function e(n,t){if(TS.boot_data.feature_sonic_emoji)return;if(!n||!t||!_.isString(n)||!_.isString(t))return false;if("::"===t)return false;var o=":"===t.charAt(0);var r=":"===t.slice(-1);t=TS.emoji.stripWrappingColons(t.toLowerCase());if(!t)return true;if(o&&r)return t===n;if(o)return n.slice(0,t.length)===t;if(r)return n.slice(-1*t.length)===t;var a=-1!==n.indexOf(t);if(a)return true;return false},emojiMatchesTerm:function e(n,t,o){if(TS.boot_data.feature_sonic_emoji)return;if(!n||!t)return false;var r=TS.emoji.nameToBaseName(n.display_name||n.name);r=TS.interop.i18n.deburr(r);t=TS.emoji.normalizeSearchTerm(t);if(TS.emoji.substringMatchesName(r,t))return true;var a=TS.interop.i18n.deburr(n.display_names||n.names);n.display_names&&n.display_names!==n.names&&(a+=" "+n.names);var i=a.split(" ");for(var s=0;s<i.length;s+=1)if(TS.emoji.substringMatchesName(TS.emoji.nameToBaseName(i[s]),t))return true;return-1!==_.indexOf(o,r)},normalizeSearchTerm:function e(n){if(!n||!_.isString(n))return;n=n.toLowerCase();n=TS.interop.i18n.deburr(n);n=n.replace(/['\u02bc\u2019]/g,"'");return n},nameToBaseName:function e(n){if(!_.isString(n))return"";n=TS.emoji.stripLocalizedSkinTone(n);n=TS.emoji.stripWrappingColons(n);return n},stripLocalizedSkinTone:function e(n){var t=/::skin-tone-[2-6]:/g;n=n.replace(t,":");if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){var o=TS.emoji.getLocalSkinToneName();t=new RegExp("::"+o+"-[2-6]:","g")}n=n.replace(t,":");return n},stripWrappingColons:function e(n){if(!n)return"";n="string"===typeof n?n:""+n;if(":"===n[0]){if(":"===n[n.length-1])return n.slice(1,n.length-1);return n.slice(1,n.length)}if(":"===n[n.length-1])return n.slice(0,n.length-1);return n},nameToCanonicalName:function e(n){n=TS.emoji.stripWrappingColons(n);if(!n)return"";n=String(n).toLowerCase();if(TS.boot_data.feature_sonic_emoji)return TS.interop.emoji.getCanonicalEmojiName(n)||n;var t=function(){var e=n.split("::");if(2!=e.length)return"";n=e[0];return"::"+e[1]}();return(m()[n]||n)+t},emojiHasAliases:function e(n){if(TS.boot_data.feature_sonic_emoji)return;return-1!==n.names.indexOf(" ")},addCustomEmoji:function e(n,t,o){if(TS.boot_data.feature_sonic_emoji)return;k(n,t,o)},removeCustomEmoji:function e(n,t){if(TS.boot_data.feature_sonic_emoji)return;var o;k(n,o,t)},renameCustomEmoji:function e(n,t,o,r){if(TS.boot_data.feature_sonic_emoji)return;TS.emoji.removeCustomEmoji(n,r);TS.emoji.addCustomEmoji(t,o,r)},ingestCustoms:function e(n){if(TS.boot_data.feature_sonic_emoji)return;TS.model.all_custom_emoji.length=0;TS.model.emoji_complex_customs={};a={};var t;var o;var r=[];_.forOwn(S.data,function(e){r.push.apply(r,e[3])});function s(e){return S.map.colons.hasOwnProperty(e)||r.indexOf(e)>=0}function l(e){var n=TS.emoji.maybeGetCanonicalEmojiName(e);return n!==e}_.forOwn(n,function(e,n){if("object"===("undefined"===typeof e?"undefined":i()(e))){TS.model.emoji_complex_customs[n]=e;S.data[n]=[[],null,null,[n],null,null,null,e.apple];S.map.colons[n]=n;TS.model.all_custom_emoji.push(n)}else{if(0===e.indexOf("alias:"))return;if(s(n)){TS.error("can't ingest custom emoji :"+n+": because that already exists");return}if(!TS.emoji.isEmojiNameSafe(n)){TS.error("can't ingest custom emoji :"+n+": because it's invalid");return}S.data[n]=[[],null,null,[n],null,null,null,e];S.map.colons[n]=n;TS.model.all_custom_emoji.push(n)}});_.forOwn(n,function(e,n){if("object"===("undefined"===typeof e?"undefined":i()(e))||0!==e.indexOf("alias:"))return;if(s(n)){TS.error("can't ingest custom emoji :"+n+": because that already exists");return}if(!TS.emoji.isEmojiNameSafe(n)){TS.error("can't ingest custom emoji :"+n+": because it's invalid");return}t=e.replace("alias:","");o=S.data.hasOwnProperty(t)&&S.data[t];if(o){o[3].push(n);S.map.colons[n]=t;return}t=S.map.colons.hasOwnProperty(t)&&S.map.colons[t];o=S.data.hasOwnProperty(t)&&S.data[t];if(o){o[3].push(n);S.map.colons[n]=t;return}TS.boot_data&&TS.boot_data.feature_tinyspeck&&TS.warn('alias for "'+n+'":"'+e+'" not recognized')});TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&_.forOwn(n,function(e,n){l(n)&&(a[n]=true)});TS.model.all_custom_emoji=TS.model.all_custom_emoji.sort();if(S&&S.inits){delete S.inits.emoticons;S.init_emoticons()}f=p()},bootEmoji:function e(){o=o?o.finally(TS.emoji.setUpEmoji):TS.emoji.setUpEmoji();return o},setUpEmoji:function e(){if(TS.boot_data.feature_sonic_emoji)return TS.redux.dispatch(TS.interop.redux.actions.loadEmoji());return new Promise(function(e){if(!S){TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Done setting up emoji, there was nothing to do");return e()}var n=function n(){S.buildKeywordIndex();y();TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Done setting up emoji");e()};w();if(!TS.boot_data.page_needs_custom_emoji)return n();if(!TS.boot_data.page_needs_custom_emoji_fresh){var t=TS.storage.fetchCustomEmoji();"calls"!==TS.boot_data.app||TS.model.emoji_cache_ts||(TS.model.emoji_cache_ts=_.get(TS.storage.fetchCustomEmoji(),"cache_ts"));if(t&&TS.model.emoji_cache_ts==t.cache_ts){TS.model.did_we_load_with_emoji_cache=true;TS.emoji.ingestCustoms(t.data);return n()}}TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Fetching emoji list before setting up emoji");var o=function e(t,o){if(!t||!o.emoji)return n();TS.model.emoji_cache_ts=o.cache_ts;TS.storage.storeCustomEmoji({data:o.emoji,cache_ts:TS.model.emoji_cache_ts});TS.emoji.ingestCustoms(o.emoji);n()};TS.interop.api.call("emoji.list",{include_complex_values:1}).then(function(e){var n=e.data,t=e.args,r=e.request_id;var a=true;o(a,n,t,r);return{data:n,args:t,request_id:r}}).catch(function(e){var n=e.data,t=e.args,r=e.request_id;var a=false;o(a,n,t,r);return{data:n,args:t,request_id:r}})})},resetUpEmoji:function e(){TS.storage.storeCustomEmoji("");v()},maybeRemakeMenuListsIfFrequentsChanged:function e(){if(TS.boot_data.feature_sonic_emoji)return;var t=u();TS.utility.areSimpleObjectsEqual(t,n,"maybemakeMenuLists")||d(t)},replaceFrecentlyUsed:function e(){if(TS.boot_data.feature_sonic_emoji)return;var n=M();if(!n.length)return;if(!_.isEqual(n,t)){d(n);t=n}},makeMenuLists:function t(){if(TS.boot_data.feature_sonic_emoji)return;TS.model.emoji_groups.length=0;TS.model.emoji_names.length=0;e={};var o=_.cloneDeep(T);var r=x();r&&r.length&&o.push({display_name:TS.interop.i18n.t("Custom","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_slack"></i></span>',tab_icon:"ts_icon_slack",tab_icon_name:"slack",name:"slack",emoji_names:r});n=u();o.unshift({name:"mine",display_name:TS.interop.i18n.t("Frequently Used","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_clock_o"></i></span>',tab_icon:"ts_icon_clock_o",tab_icon_name:"clock_o",emoji_names:n});var i;var s;var l=[];for(i=0;i<o.length;i+=1)l=l.concat(o[i].emoji_names);var c={};Object.keys(S.data).forEach(function(n){var t=S.data[n][3];var o=TS.emoji.isIdxSkinToneModifiable(n);t.forEach(function(t,r,a){var i=t;var s=_.compact(a);s.length!==a.length&&TS.error('Emoji "'+t+'" contains bad record(s) in "names" prop');TS.model.emoji_names.push(t);e[t]=true;if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){i=TS.emoji.maybeGetLocalizedEmojiName(t);s=a.map(function(e){return TS.emoji.maybeGetLocalizedEmojiName(e)})}c[t]={html:TS.emoji.graphicReplace(":"+t+":"),name:":"+t+":",names:":"+a.join(": :")+":",display_name:":"+i+":",display_names:":"+s.join(": :")+":"};TS.model.emoji_map.push({id:"E"+n+(r>0?"_alias_"+r:""),name:t,name_with_colons:":"+t+":",display_name:i,is_skin:o,is_emoji:true});if(o){c[t].is_skin=true;c[t].skin_tone_id="1";S.skin_tones.forEach(function(o){if(!g(n,o))return;var r=S.data[o];var l=r[3][0];var _=t+"::"+l;TS.model.emoji_names.push(_);e[_]=true;var u=":"+_+":";var d=a.map(function(e){return e+"::"+l});var f=u;var m=d;if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){var p=TS.emoji.maybeGetLocalizedEmojiName(l);f=":"+i+"::"+p+":";m=s.map(function(e){return e+"::"+p})}c[_]={is_skin:true,skin_tone_id:l.substr(-1,1),html:TS.emoji.graphicReplace(u),name:u,names:":"+d.join(": :")+":",display_name:f,display_names:":"+m.join(": :")+":"}})}})});h=c;TS.model.emoji_map=_.uniqBy(TS.model.emoji_map,"id");TS.boot_data.feature_emoji_by_id&&(TS.model.emoji_map_by_id=_.keyBy(TS.model.emoji_map,"id"));for(i=0;i<l.length;i+=1){var d=l[i];c[d]||TS.info(d+" not in cat_map?")}var f;var m;var p;var v;for(i=0;i<o.length;i+=1){f=o[i];m=[];p=null;v="";f.tab_icon_html&&(v=f.tab_icon_html);for(s=0;s<f.emoji_names.length;s+=1){p=c[f.emoji_names[s]];m.push(p);if(v)continue;f.emoji_names[s]==f.name&&(v=p.html)}p=m[0];TS.model.emoji_groups.push({name:f.name,display_name:f.display_name,tab_html:v||p.html,tab_icon:f.tab_icon,tab_icon_name:f.tab_icon_name,items:m})}var b=TS.emoji.getCurrentSheetUrl();if(E("ss_emojis")&&b){var w=new Image;w.onload=function(){w.onload=null;w.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";w=null};w.src=b}TS.model.emoji_names.sort();TS.emoji.friendlyReorder();var y=TS.model.emoji_names.indexOf("ok");var k=TS.model.emoji_names.indexOf("ok_hand");TS.model.emoji_names[y]="ok_hand";TS.model.emoji_names[k]="ok";TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&_.each(a,function(e,n){var t=_.remove(TS.model.emoji_map,{name:n});TS.boot_data.feature_emoji_by_id&&t.forEach(function(e){delete TS.model.emoji_map_by_id[e.id]})})},friendlyReorder:function e(){if(TS.boot_data.feature_sonic_emoji)return;var n=[{filter:"th",first:"thumbsup",second:"thumbsdown"},{filter:"po",first:"point_up",second:"point_down"}];n.forEach(function(e){var n=_.reduce(TS.model.emoji_names,function(n,t,o){if(0===t.indexOf(e.filter)){var r=TS.model.all_custom_emoji.indexOf(t)>-1;var a=!r&&0===t.indexOf(e.first);var i=!r&&!a&&0===t.indexOf(e.second);n.emoji.push({name:t,is_first:a,is_second:i});n.indexes.push(o)}return n},{indexes:[],emoji:[]});n.emoji=_.orderBy(n.emoji,["is_first","is_second","name"],["desc","desc","asc"]);_.forEach(n.emoji,function(e,t){var o=n.indexes[t];TS.model.emoji_names[o]=e.name})})},isIdxSkinToneModifiable:function e(n){if(TS.boot_data.feature_sonic_emoji)return;return g(n,S.skin_tones[0])},isNameSkinToneModifiable:function e(n){if(TS.boot_data.feature_sonic_emoji)return TS.interop.emoji.isEmojiNameSkinToneModifiable(n);n=TS.emoji.stripWrappingColons(n);n=String(n).toLowerCase();var t=S.map.colons[n];return TS.emoji.isIdxSkinToneModifiable(t)},renderIconFallback:function e(n){var t=n.replace(/:/g,"");return'<ts-icon class="emoji-sizer ts_icon_info_circle ts_icon_inherit" title="'+t+'"></ts-icon>'},sonicGenerateEmojiHtml:function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!TS.boot_data.feature_sonic_emoji)return null;var t=TS.interop.emojiComponent.mapStateToProps(n)||{};var o=r()({},n,t);var a=o.displayText,i=o.url,s=o.renderAsText,l=o.iconInTextMode,c=o.className,u=o.includeTitle,d=o.includeText;if(s||!i){if(l)return TS.emoji.renderIconFallback(a);return a}var f=["emoji","emoji-sizer",c];return TS.templates.sonic_emoji({url:i,displayText:d&&a,displayTitle:u&&TS.emoji.stripWrappingColons(a),emojiClassNames:_.compact(f).join(" ")})},sonicReplaceEmojiInString:function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o=TS.interop.utility.getColonsRx();return n.replace(o,function(e){return TS.emoji.sonicGenerateEmojiHtml(r()({},t,{text:e}))})},graphicReplace:function e(n,t){if(!n)return"";t=t||{};if(TS.boot_data.feature_sonic_emoji){var o=t.emojiSize;!o&&t.jumbomoji&&(o=TS.interop.emojiComponent.EmojiSizes.LARGE);return TS.emoji.sonicReplaceEmojiInString(n,{emojiSize:o,forceDisplay:t.force_img,stopAnimations:t.stop_animations,className:t.jumbomoji?"emoji-only":void 0,iconInTextMode:t.show_icon_for_emoji_in_as_text_mode&&TS.interop.emoji.isValidEmojiText(n),includeTitle:t.include_title,includeText:t.include_text})}var r=S;if(t.show_icon_for_emoji_in_as_text_mode&&TS.emoji.isValidName(n))return TS.emoji.renderIconFallback(n);r.init_env();var a=r.text_mode;var i=r.include_title;var s=r.include_text;var l=r.supports_css;var c=r.allow_skin_tone_squares;if(t.force_img&&t.obey_emoji_mode_pref){t.obey_emoji_mode_pref=false;TS.error("obey_emoji_mode_pref now set to FALSE because options.force_img is TRUE")}if(t.force_style&&t.obey_emoji_mode_pref){t.obey_emoji_mode_pref=false;TS.error("obey_emoji_mode_pref now set to FALSE because options.force_style is "+t.force_style)}r.text_mode=t.obey_emoji_mode_pref&&TS.interop.rules.emoji.shouldRenderEmojiAsText();if(t.force_style){TS.emoji.setEmojiMode(t.force_style);r.use_sheet=false}r.include_title=!!t.include_title;r.include_text=!!t.include_text;r.supports_css=!t.force_img;r.allow_skin_tone_squares=!t.no_skin_tone_squares;var _=r.replace_colons(n,{stop_animations:t.stop_animations});t.jumbomoji&&(_=_.replace("emoji-sizer","emoji-sizer emoji-only"));t.force_style&&TS.emoji.setEmojiMode();r.text_mode=a;r.include_title=i;r.include_text=s;r.supports_css=l;r.allow_skin_tone_squares=c;return _},replaceColons:function e(n){if(TS.boot_data.feature_sonic_emoji)return null;if(n.indexOf(":")<0)return n;return S.replace_colons(n)},maybeUnifiedReplace:function e(n){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.replaceTextEmojiWithNative(n);if("unified"!==S.replace_mode)return n;return S.replace_colons_with_unified(n)},legacyReplaceEmoticons:function e(n){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.replaceEmoticonsWithColons(n);return S.replace_emoticons_with_colons(n)},getLocalSkinToneName:function e(){var n="skin-tone";TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(n=TS.boot_data.feature_sonic_emoji?TS.emoji.maybeGetLocalizedEmojiName("skin-tone"):TSFEmoji.getLocalSkinToneName(TS.interop.i18n.locale));return n},getChosenSkinTone:function e(n){var t=parseInt(E("preferred_skin_tone"),10);if(!t||"1"==t||!_.includes([2,3,4,5,6],t))return"";var o=n?TS.emoji.getLocalSkinToneName():"skin-tone";return o+"-"+t},getChosenSkinToneModifier:function e(n){var t=TS.emoji.getChosenSkinTone(n);if(!t)return"";return":"+t+":"},setEmojiMode:function e(n){if(TS.boot_data.feature_sonic_emoji)return;var t=["google","apple"];n=n||TS.interop.rules.emoji.getEmojiMode();S.text_mode="as_text"===n;S.do_emoticons=!!E("graphic_emoticons");S.allow_native=false;S.use_sheet=function(){if(!E("ss_emojis"))return false;return!!TS.boot_data.page_needs_custom_emoji}();var o=n;"as_text"==n&&(o=TS.interop.rules.emoji.getEmojiMode({forceDisplay:true}));S.img_set=_.includes(t,o)?o:"apple";if(!TS.model.emoji_complex_customs)return;for(var r in TS.model.emoji_complex_customs){if(!S.data[r])continue;S.data[r][7]=TS.model.emoji_complex_customs[r][S.img_set]}},legacyGetColonsRx:function e(){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.getColonsRx();return S&&S.rx_colons},legacyGetEmojiNames:function e(){if(TS.boot_data.feature_sonic_emoji)return TS.interop.redux.models.emoji.getAllEmojiNames(TS.redux.getState());return _.map(TS.emoji.getEmojiMap(),"name")},getEmojiByName:function e(n){if(TS.boot_data.feature_sonic_emoji)return;if(!n)return;return _.find(TS.model.emoji_map,{name:n})},getEmojiById:function e(n){if(TS.boot_data.feature_sonic_emoji)return;if(TS.boot_data.feature_emoji_by_id)return TS.model.emoji_map_by_id[n];var t=_.find(TS.model.emoji_map,{id:n});if(!t){TS.warn("no emoji ob found for "+n);return}return t},getEmojiMap:function e(){if(TS.boot_data.feature_sonic_emoji)return;return TS.model.emoji_map},getEmojiForSpaces:function e(){var n={emoji:{}};if(TS.boot_data.feature_sonic_emoji){n.emoticonEmojiNames=TS.interop.utility.getEmoticonMap();n.replace=function(e){var n=TS.interop.utility.replaceNativeEmojiWithText(e);if(!n)return e;return TS.emoji.maybeGetCanonicalEmojiString(n)}}else{n.emoticonEmojiNames=S.emoticons_data;n.sheetSize=S.sheet_size;n.sheetPath=TS.emoji.getCurrentSheetUrl();n.replace=function(){var e=S.colons_mode;S.colons_mode=true;var n=S.replace_unified.apply(S,arguments);TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(n=TS.emoji.maybeGetCanonicalEmojiString(n));S.colons_mode=e;return n}}TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(n.getLocalEmojiString=function(e){if(!e)return"";return TS.emoji.maybeGetLocalizedEmojiName(e)||e});if(TS.boot_data.feature_sonic_emoji){var t=TS.interop.emojiComponent.EmojiSizes.MEDIUM;var o=TS.interop.rules.emoji.getEmojiMode({forceDisplay:true});TS.emoji.legacyGetEmojiNames().forEach(function(e){var r=TS.interop.emoji.getEmojiUrl({text:e,emojiMode:o,emojiSize:t});E("a11y_animations")||(r=TS.utility.getImgProxyURLWithOptions(r,{emoji:true}));n.emoji[e]=r})}else Object.keys(S.data).forEach(function(e){var t=S.data[e];var o=t[3];var r=t[4];var a=t[5];var i=t[7];var s;if(null!==r&&null!==a)s=[r,a];else{if(!i){TS.error('WTF, _emoji "'+e+'" is missing coords or and a url, or something!');return}s=false===E("a11y_animations")?TS.utility.getImgProxyURLWithOptions(i,{emoji:true}):i}o.forEach(function(e){n.emoji[e]=s})});return n},getCurrentSheetUrl:function e(){if(TS.boot_data.feature_sonic_emoji)return null;return S.img_sets[S.img_set].sheet},getCurrentImagePath:function e(){if(TS.boot_data.feature_sonic_emoji)return null;return S.img_sets[S.img_set].path},hasUnifiedEmoji:function e(n){if(TS.boot_data.feature_sonic_emoji){if(!_.isString(n))return false;var t=TS.interop.utility.getNativeEmojiRx();return-1!==n.search(t)}S.init_unified();return-1!==n.search(S.rx_unified)},test:function e(){return{emoji:S}},spliceSkinToneVariationsIntoAnArrayOfEmojiNames:function e(n){if(TS.boot_data.feature_sonic_emoji)return;var t=0;n.concat().forEach(function(e,o){var r=S.map.colons[e];var a=S.data.hasOwnProperty(r)&&S.data[r];if(!a)return;S.skin_tones.forEach(function(a){if(!g(r,a))return;var i=S.data[a];var s=i[3][0];var l=e+"::"+s;if(-1!==n.indexOf(l))return;t+=1;var c=t+o;n.splice(c,0,l)})})},findByKeyword:function e(n){if(TS.boot_data.feature_sonic_emoji)return null;return S.findByKeyword(n)},getObsoletedEmojiNameFromModernEmojiName:function e(n){if(TS.boot_data.feature_sonic_emoji)return;if(!n)return null;var t=TS.emoji.stripWrappingColons(n);var o=/(::skin-tone-[2-6])/;var r=t.match(o);var a=r?r[1]:"";var i=t.replace(o,"");var s=S.map.colons[i];if(!s)return null;var l=S.obsoletes_data[s];var c=l&&l[4]&&l[4][0];if(c&&c!=i)return c+a;return null},maybeGetCanonicalEmojiString:function e(n){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.emojiTranslation.convertEmojiInStringToCanonical({locale:TS.interop.i18n.locale,text:n});return TSFEmoji.translateEmojiStringToCanonical(n,TS.interop.i18n.locale,{include_emoji_5:true})}return n},maybeGetLocalizedEmojiString:function e(n){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.emojiTranslation.convertEmojiInStringToLocalized({locale:TS.interop.i18n.locale,text:n});return TSFEmoji.translateEmojiStringToLocal(n,TS.interop.i18n.locale,{include_emoji_5:true})}return n},maybeGetLocalizedEmojiName:function e(n){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.emojiTranslation.getLocalizedEmojiName({locale:TS.interop.i18n.locale,name:n});return TSFEmoji.getLocalEmojiString(n,TS.interop.i18n.locale,{include_emoji_5:true})}return n},maybeGetCanonicalEmojiName:function e(n){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.emojiTranslation.getCanonicalEmojiName({locale:TS.interop.i18n.locale,name:n});return TSFEmoji.getCanonicalEmojiString(n,TS.interop.i18n.locale,{include_emoji_5:true})}return n},MISSING_EMOJI_HTML:'<span class="emoji-outer emoji-sizer emoji-bg-contain" style="background-image: url('+cdn_url+'/ecf3e/img/emoji_missing.png);"></span>'});var e={};var n;var t;var o;var a={};var s="E";var l=36;var c=50;var u=function e(){var n;var t={};_.each(_.keys(TS.model.emoji_use),function(e){n=TS.emoji.nameToCanonicalName(e.split("::")[0]);if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&O(n))return;t.hasOwnProperty(n)||(t[n]=0);t[n]+=TS.model.emoji_use[e]});TS.dir(777,t,"condensed emoji names:");var o=Object.keys(t).sort(function(e,n){var o=t[e];var r=t[n];if(o==r){if(e<n)return-1;if(e>n)return 1}return-(o-r)});var r=9;o.length=Math.min(o.length,4*r);var a=["slightly_smiling_face","heart","+1","100","bug"];var i;while(o.length<5&&a.length){i=a.shift();-1===o.indexOf(i)&&o.push(i)}TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(o);return o};var d=function e(t){n=t;var o=_.find(_.get(TS.model,"emoji_groups"),{name:"mine"});o||TS.emoji.makeMenuLists();var r=[];n.forEach(function(e){var n=h[e];n&&r.push(n)});o.items=r};var f;var m=function e(){f=f||p();return f};var p=function e(){var n={};var t;Object.keys(S.data).forEach(function(e){t=S.data[e];n[t[3][0]]=null;t[3].forEach(function(e){if(n.hasOwnProperty(e))return;n[e]=t[3][0]})});return n};var g=function e(n,t){return!!(S.variations_data[n]&&S.variations_data[n][t])};var S=emoji;var h={};var T=[{name:"people",display_name:TS.interop.i18n.t("People","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_happy_smile"></i></span>',tab_icon:"ts_icon_happy_smile",tab_icon_name:"happy_smile",emoji_names:["grinning","grin","joy","rolling_on_the_floor_laughing","smiley","smile","sweat_smile","laughing","wink","blush","yum","sunglasses","heart_eyes","kissing_heart","kissing","kissing_smiling_eyes","kissing_closed_eyes","relaxed","slightly_smiling_face","hugging_face","star-struck","thinking_face","face_with_raised_eyebrow","neutral_face","expressionless","no_mouth","face_with_rolling_eyes","smirk","persevere","disappointed_relieved","open_mouth","zipper_mouth_face","hushed","sleepy","tired_face","sleeping","relieved","stuck_out_tongue","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","drooling_face","unamused","sweat","pensive","confused","upside_down_face","money_mouth_face","astonished","white_frowning_face","slightly_frowning_face","confounded","disappointed","worried","triumph","cry","sob","frowning","anguished","fearful","weary","exploding_head","grimacing","cold_sweat","scream","flushed","zany_face","dizzy_face","rage","angry","face_with_symbols_on_mouth","mask","face_with_thermometer","face_with_head_bandage","nauseated_face","face_vomiting","sneezing_face","innocent","face_with_cowboy_hat","clown_face","lying_face","shushing_face","face_with_hand_over_mouth","face_with_monocle","nerd_face","smiling_imp","imp","japanese_ogre","japanese_goblin","skull","skull_and_crossbones","ghost","alien","space_invader","robot_face","hankey","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","see_no_evil","hear_no_evil","speak_no_evil","baby","child","boy","girl","adult","man","woman","older_adult","older_man","older_woman","male-doctor","female-doctor","male-student","female-student","male-teacher","female-teacher","male-judge","female-judge","male-farmer","female-farmer","male-cook","female-cook","male-mechanic","female-mechanic","male-factory-worker","female-factory-worker","male-office-worker","female-office-worker","male-scientist","female-scientist","male-technologist","female-technologist","male-singer","female-singer","male-artist","female-artist","male-pilot","female-pilot","male-astronaut","female-astronaut","male-firefighter","female-firefighter","male-police-officer","female-police-officer","male-detective","female-detective","male-guard","female-guard","male-construction-worker","female-construction-worker","prince","princess","man-wearing-turban","woman-wearing-turban","man_with_gua_pi_mao","person_with_headscarf","bearded_person","blond-haired-man","blond-haired-woman","man_in_tuxedo","bride_with_veil","pregnant_woman","breast-feeding","angel","santa","mrs_claus","female_mage","male_mage","female_fairy","male_fairy","female_vampire","male_vampire","mermaid","merman","female_elf","male_elf","female_genie","male_genie","female_zombie","male_zombie","man-frowning","woman-frowning","man-pouting","woman-pouting","man-gesturing-no","woman-gesturing-no","man-gesturing-ok","woman-gesturing-ok","man-tipping-hand","woman-tipping-hand","man-raising-hand","woman-raising-hand","man-bowing","woman-bowing","face_palm","man-facepalming","woman-facepalming","shrug","man-shrugging","woman-shrugging","man-getting-massage","woman-getting-massage","man-getting-haircut","woman-getting-haircut","man-walking","woman-walking","man-running","woman-running","dancer","man_dancing","man-with-bunny-ears-partying","woman-with-bunny-ears-partying","woman_in_steamy_room","man_in_steamy_room","woman_climbing","man_climbing","woman_in_lotus_position","man_in_lotus_position","bath","sleeping_accommodation","man_in_business_suit_levitating","speaking_head_in_silhouette","bust_in_silhouette","busts_in_silhouette","fencer","horse_racing","skier","snowboarder","man-golfing","woman-golfing","man-surfing","woman-surfing","man-rowing-boat","woman-rowing-boat","man-swimming","woman-swimming","man-bouncing-ball","woman-bouncing-ball","man-lifting-weights","woman-lifting-weights","man-biking","woman-biking","man-mountain-biking","woman-mountain-biking","racing_car","racing_motorcycle","person_doing_cartwheel","man-cartwheeling","woman-cartwheeling","wrestlers","man-wrestling","woman-wrestling","water_polo","man-playing-water-polo","woman-playing-water-polo","handball","man-playing-handball","woman-playing-handball","juggling","man-juggling","woman-juggling","couple","two_men_holding_hands","two_women_holding_hands","woman-kiss-man","man-kiss-man","woman-kiss-woman","woman-heart-man","man-heart-man","woman-heart-woman","man-woman-boy","man-woman-girl","man-woman-girl-boy","man-woman-boy-boy","man-woman-girl-girl","man-man-boy","man-man-girl","man-man-girl-boy","man-man-boy-boy","man-man-girl-girl","woman-woman-boy","woman-woman-girl","woman-woman-girl-boy","woman-woman-boy-boy","woman-woman-girl-girl","man-boy","man-boy-boy","man-girl","man-girl-boy","man-girl-girl","woman-boy","woman-boy-boy","woman-girl","woman-girl-boy","woman-girl-girl","selfie","muscle","point_left","point_right","point_up","point_up_2","middle_finger","point_down","v","crossed_fingers","spock-hand","the_horns","call_me_hand","raised_hand_with_fingers_splayed","hand","ok_hand","+1","-1","fist","facepunch","left-facing_fist","right-facing_fist","raised_back_of_hand","wave","i_love_you_hand_sign","writing_hand","clap","open_hands","raised_hands","palms_up_together","pray","handshake","nail_care","ear","nose","footprints","eyes","eye","eye-in-speech-bubble","brain","tongue","lips","kiss","cupid","heart","heartbeat","broken_heart","two_hearts","sparkling_heart","heartpulse","blue_heart","green_heart","yellow_heart","orange_heart","purple_heart","black_heart","gift_heart","revolving_hearts","heart_decoration","heavy_heart_exclamation_mark_ornament","love_letter","zzz","anger","bomb","boom","sweat_drops","dash","dizzy","speech_balloon","left_speech_bubble","right_anger_bubble","thought_balloon","hole","eyeglasses","dark_sunglasses","necktie","shirt","jeans","scarf","gloves","coat","socks","dress","kimono","bikini","womans_clothes","purse","handbag","pouch","shopping_bags","school_satchel","mans_shoe","athletic_shoe","high_heel","sandal","boot","crown","womans_hat","tophat","mortar_board","billed_cap","helmet_with_white_cross","prayer_beads","lipstick","ring","gem"]},{name:"nature",display_name:TS.interop.i18n.t("Nature","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_nature"></i></span>',tab_icon:"ts_icon_emoji_nature",tab_icon_name:"emoji_nature",emoji_names:["monkey_face","monkey","gorilla","dog","dog2","poodle","wolf","fox_face","cat","cat2","lion_face","tiger","tiger2","leopard","horse","racehorse","unicorn_face","zebra_face","deer","cow","ox","water_buffalo","cow2","pig","pig2","boar","pig_nose","ram","sheep","goat","dromedary_camel","camel","giraffe_face","elephant","rhinoceros","mouse","mouse2","rat","hamster","rabbit","rabbit2","chipmunk","hedgehog","bat","bear","koala","panda_face","feet","turkey","chicken","rooster","hatching_chick","baby_chick","hatched_chick","bird","penguin","dove_of_peace","eagle","duck","owl","frog","crocodile","turtle","lizard","snake","dragon_face","dragon","sauropod","t-rex","whale","whale2","dolphin","fish","tropical_fish","blowfish","shark","octopus","shell","crab","shrimp","squid","snail","butterfly","bug","ant","bee","beetle","cricket","spider","spider_web","scorpion","bouquet","cherry_blossom","white_flower","rosette","rose","wilted_flower","hibiscus","sunflower","blossom","tulip","seedling","evergreen_tree","deciduous_tree","palm_tree","cactus","ear_of_rice","herb","shamrock","four_leaf_clover","maple_leaf","fallen_leaf","leaves"]},{name:"food_and_drink",display_name:TS.interop.i18n.t("Food & Drink","client")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_food"></i></span>',tab_icon:"ts_icon_emoji_food",tab_icon_name:"emoji_food",emoji_names:["grapes","melon","watermelon","tangerine","lemon","banana","pineapple","apple","green_apple","pear","peach","cherries","strawberry","kiwifruit","tomato","coconut","avocado","eggplant","potato","carrot","corn","hot_pepper","cucumber","broccoli","mushroom","peanuts","chestnut","bread","croissant","baguette_bread","pretzel","pancakes","cheese_wedge","meat_on_bone","poultry_leg","cut_of_meat","bacon","hamburger","fries","pizza","hotdog","sandwich","taco","burrito","stuffed_flatbread","egg","fried_egg","shallow_pan_of_food","stew","bowl_with_spoon","green_salad","popcorn","canned_food","bento","rice_cracker","rice_ball","rice","curry","ramen","spaghetti","sweet_potato","oden","sushi","fried_shrimp","fish_cake","dango","dumpling","fortune_cookie","takeout_box","icecream","shaved_ice","ice_cream","doughnut","cookie","birthday","cake","pie","chocolate_bar","candy","lollipop","custard","honey_pot","baby_bottle","glass_of_milk","coffee","tea","sake","champagne","wine_glass","cocktail","tropical_drink","beer","beers","clinking_glasses","tumbler_glass","cup_with_straw","chopsticks","knife_fork_plate","fork_and_knife","spoon","hocho","amphora"]},{name:"activity",display_name:TS.interop.i18n.t("Activity","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_activities"></i></span>',tab_icon:"ts_icon_emoji_activities",tab_icon_name:"emoji_activities",emoji_names:["jack_o_lantern","christmas_tree","fireworks","sparkler","sparkles","balloon","tada","confetti_ball","tanabata_tree","bamboo","dolls","flags","wind_chime","rice_scene","ribbon","gift","reminder_ribbon","admission_tickets","ticket","medal","trophy","sports_medal","first_place_medal","second_place_medal","third_place_medal","soccer","baseball","basketball","volleyball","football","rugby_football","tennis","8ball","bowling","cricket_bat_and_ball","field_hockey_stick_and_ball","ice_hockey_stick_and_puck","table_tennis_paddle_and_ball","badminton_racquet_and_shuttlecock","boxing_glove","martial_arts_uniform","goal_net","dart","golf","ice_skate","fishing_pole_and_fish","running_shirt_with_sash","ski","sled","curling_stone","video_game","joystick","game_die","spades","hearts","diamonds","clubs","black_joker","mahjong","flower_playing_cards"]},{name:"travel_and_places",display_name:TS.interop.i18n.t("Travel & Places","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_travel"></i></span>',tab_icon:"ts_icon_emoji_travel",tab_icon_name:"emoji_travel",emoji_names:["earth_africa","earth_americas","earth_asia","globe_with_meridians","world_map","japan","snow_capped_mountain","mountain","volcano","mount_fuji","camping","beach_with_umbrella","desert","desert_island","national_park","stadium","classical_building","building_construction","house_buildings","cityscape","derelict_house_building","house","house_with_garden","office","post_office","european_post_office","hospital","bank","hotel","love_hotel","convenience_store","school","department_store","factory","japanese_castle","european_castle","wedding","tokyo_tower","statue_of_liberty","church","mosque","synagogue","shinto_shrine","kaaba","fountain","tent","foggy","night_with_stars","sunrise_over_mountains","sunrise","city_sunset","city_sunrise","bridge_at_night","hotsprings","milky_way","carousel_horse","ferris_wheel","roller_coaster","barber","circus_tent","performing_arts","frame_with_picture","art","slot_machine","steam_locomotive","railway_car","bullettrain_side","bullettrain_front","train2","metro","light_rail","station","tram","monorail","mountain_railway","train","bus","oncoming_bus","trolleybus","minibus","ambulance","fire_engine","police_car","oncoming_police_car","taxi","oncoming_taxi","car","oncoming_automobile","blue_car","truck","articulated_lorry","tractor","bike","scooter","motor_scooter","busstop","motorway","railway_track","fuelpump","rotating_light","traffic_light","vertical_traffic_light","construction","octagonal_sign","anchor","boat","canoe","speedboat","passenger_ship","ferry","motor_boat","ship","airplane","small_airplane","airplane_departure","airplane_arriving","seat","helicopter","suspension_railway","mountain_cableway","aerial_tramway","satellite","rocket","flying_saucer","bellhop_bell","door","bed","couch_and_lamp","toilet","shower","bathtub","hourglass","hourglass_flowing_sand","watch","alarm_clock","stopwatch","timer_clock","mantelpiece_clock","clock12","clock1230","clock1","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","clock10","clock1030","clock11","clock1130","new_moon","waxing_crescent_moon","first_quarter_moon","moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","crescent_moon","new_moon_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","thermometer","sunny","full_moon_with_face","sun_with_face","star","star2","stars","cloud","partly_sunny","thunder_cloud_and_rain","mostly_sunny","barely_sunny","partly_sunny_rain","rain_cloud","snow_cloud","lightning","tornado","fog","wind_blowing_face","cyclone","rainbow","closed_umbrella","umbrella","umbrella_with_rain_drops","umbrella_on_ground","zap","snowflake","snowman","snowman_without_snow","comet","fire","droplet","ocean"]},{name:"objects",display_name:TS.interop.i18n.t("Objects","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_lightbulb_o"></i></span>',tab_icon:"ts_icon_lightbulb_o",tab_icon_name:"lightbulb_o",emoji_names:["mute","speaker","sound","loud_sound","loudspeaker","mega","postal_horn","bell","no_bell","musical_score","musical_note","notes","studio_microphone","level_slider","control_knobs","microphone","headphones","radio","saxophone","guitar","musical_keyboard","trumpet","violin","drum_with_drumsticks","iphone","calling","phone","telephone_receiver","pager","fax","battery","electric_plug","computer","desktop_computer","printer","keyboard","three_button_mouse","trackball","minidisc","floppy_disk","cd","dvd","movie_camera","film_frames","film_projector","clapper","tv","camera","camera_with_flash","video_camera","vhs","mag","mag_right","microscope","telescope","satellite_antenna","candle","bulb","flashlight","izakaya_lantern","notebook_with_decorative_cover","closed_book","book","green_book","blue_book","orange_book","books","notebook","ledger","page_with_curl","scroll","page_facing_up","newspaper","rolled_up_newspaper","bookmark_tabs","bookmark","label","moneybag","yen","dollar","euro","pound","money_with_wings","credit_card","chart","currency_exchange","heavy_dollar_sign","email","e-mail","incoming_envelope","envelope_with_arrow","outbox_tray","inbox_tray","package","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","postbox","ballot_box_with_ballot","pencil2","black_nib","lower_left_fountain_pen","lower_left_ballpoint_pen","lower_left_paintbrush","lower_left_crayon","memo","briefcase","file_folder","open_file_folder","card_index_dividers","date","calendar","spiral_note_pad","spiral_calendar_pad","card_index","chart_with_upwards_trend","chart_with_downwards_trend","bar_chart","clipboard","pushpin","round_pushpin","paperclip","linked_paperclips","straight_ruler","triangular_ruler","scissors","card_file_box","file_cabinet","wastebasket","lock","unlock","lock_with_ink_pen","closed_lock_with_key","key","old_key","hammer","pick","hammer_and_pick","hammer_and_wrench","dagger_knife","crossed_swords","gun","bow_and_arrow","shield","wrench","nut_and_bolt","gear","compression","alembic","scales","link","chains","syringe","pill","smoking","coffin","funeral_urn","moyai","oil_drum","crystal_ball","shopping_trolley"]},{name:"symbols",display_name:TS.interop.i18n.t("Symbols","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_heart_o"></i></span>',tab_icon:"ts_icon_heart_o",tab_icon_name:"heart_o",emoji_names:["atm","put_litter_in_its_place","potable_water","wheelchair","mens","womens","restroom","baby_symbol","wc","passport_control","customs","baggage_claim","left_luggage","warning","children_crossing","no_entry","no_entry_sign","no_bicycles","no_smoking","do_not_litter","non-potable_water","no_pedestrians","no_mobile_phones","underage","radioactive_sign","biohazard_sign","arrow_up","arrow_upper_right","arrow_right","arrow_lower_right","arrow_down","arrow_lower_left","arrow_left","arrow_upper_left","arrow_up_down","left_right_arrow","leftwards_arrow_with_hook","arrow_right_hook","arrow_heading_up","arrow_heading_down","arrows_clockwise","arrows_counterclockwise","back","end","on","soon","top","place_of_worship","atom_symbol","om_symbol","star_of_david","wheel_of_dharma","yin_yang","latin_cross","orthodox_cross","star_and_crescent","peace_symbol","menorah_with_nine_branches","six_pointed_star","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","twisted_rightwards_arrows","repeat","repeat_one","arrow_forward","fast_forward","black_right_pointing_double_triangle_with_vertical_bar","black_right_pointing_triangle_with_double_vertical_bar","arrow_backward","rewind","black_left_pointing_double_triangle_with_vertical_bar","arrow_up_small","arrow_double_up","arrow_down_small","arrow_double_down","double_vertical_bar","black_square_for_stop","black_circle_for_record","eject","cinema","low_brightness","high_brightness","signal_strength","vibration_mode","mobile_phone_off","female_sign","male_sign","medical_symbol","recycle","fleur_de_lis","trident","name_badge","beginner","o","white_check_mark","ballot_box_with_check","heavy_check_mark","heavy_multiplication_x","x","negative_squared_cross_mark","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","curly_loop","loop","part_alternation_mark","eight_spoked_asterisk","eight_pointed_black_star","sparkle","bangbang","interrobang","question","grey_question","grey_exclamation","exclamation","wavy_dash","copyright","registered","tm","hash","keycap_star","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","100","capital_abcd","abcd","1234","symbols","abc","a","ab","b","cl","cool","free","information_source","id","m","new","ng","o2","ok","parking","sos","up","vs","koko","sa","u6708","u6709","u6307","ideograph_advantage","u5272","u7121","u7981","accept","u7533","u5408","u7a7a","congratulations","secret","u55b6","u6e80","black_small_square","white_small_square","white_medium_square","black_medium_square","white_medium_small_square","black_medium_small_square","black_large_square","white_large_square","large_orange_diamond","large_blue_diamond","small_orange_diamond","small_blue_diamond","small_red_triangle","small_red_triangle_down","diamond_shape_with_a_dot_inside","radio_button","black_square_button","white_square_button","white_circle","black_circle","red_circle","large_blue_circle"]},{name:"flags",display_name:TS.interop.i18n.t("Flags","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_flag"></i></span>',tab_icon:"ts_icon_flag",tab_icon_name:"flag",emoji_names:["checkered_flag","triangular_flag_on_post","crossed_flags","waving_black_flag","waving_white_flag","rainbow-flag","flag-ac","flag-ad","flag-ae","flag-af","flag-ag","flag-ai","flag-al","flag-am","flag-ao","flag-aq","flag-ar","flag-as","flag-at","flag-au","flag-aw","flag-ax","flag-az","flag-ba","flag-bb","flag-bd","flag-be","flag-bf","flag-bg","flag-bh","flag-bi","flag-bj","flag-bl","flag-bm","flag-bn","flag-bo","flag-bq","flag-br","flag-bs","flag-bt","flag-bv","flag-bw","flag-by","flag-bz","flag-ca","flag-cc","flag-cd","flag-cf","flag-cg","flag-ch","flag-ci","flag-ck","flag-cl","flag-cm","cn","flag-co","flag-cp","flag-cr","flag-cu","flag-cv","flag-cw","flag-cx","flag-cy","flag-cz","de","flag-dg","flag-dj","flag-dk","flag-dm","flag-do","flag-dz","flag-ea","flag-ec","flag-ee","flag-eg","flag-eh","flag-er","es","flag-et","flag-eu","flag-fi","flag-fj","flag-fk","flag-fm","flag-fo","fr","flag-ga","gb","flag-gd","flag-ge","flag-gf","flag-gg","flag-gh","flag-gi","flag-gl","flag-gm","flag-gn","flag-gp","flag-gq","flag-gr","flag-gs","flag-gt","flag-gu","flag-gw","flag-gy","flag-hk","flag-hm","flag-hn","flag-hr","flag-ht","flag-hu","flag-ic","flag-id","flag-ie","flag-il","flag-im","flag-in","flag-io","flag-iq","flag-ir","flag-is","it","flag-je","flag-jm","flag-jo","jp","flag-ke","flag-kg","flag-kh","flag-ki","flag-km","flag-kn","flag-kp","kr","flag-kw","flag-ky","flag-kz","flag-la","flag-lb","flag-lc","flag-li","flag-lk","flag-lr","flag-ls","flag-lt","flag-lu","flag-lv","flag-ly","flag-ma","flag-mc","flag-md","flag-me","flag-mf","flag-mg","flag-mh","flag-mk","flag-ml","flag-mm","flag-mn","flag-mo","flag-mp","flag-mq","flag-mr","flag-ms","flag-mt","flag-mu","flag-mv","flag-mw","flag-mx","flag-my","flag-mz","flag-na","flag-nc","flag-ne","flag-nf","flag-ng","flag-ni","flag-nl","flag-no","flag-np","flag-nr","flag-nu","flag-nz","flag-om","flag-pa","flag-pe","flag-pf","flag-pg","flag-ph","flag-pk","flag-pl","flag-pm","flag-pn","flag-pr","flag-ps","flag-pt","flag-pw","flag-py","flag-qa","flag-re","flag-ro","flag-rs","ru","flag-rw","flag-sa","flag-sb","flag-sc","flag-sd","flag-se","flag-sg","flag-sh","flag-si","flag-sj","flag-sk","flag-sl","flag-sm","flag-sn","flag-so","flag-sr","flag-ss","flag-st","flag-sv","flag-sx","flag-sy","flag-sz","flag-ta","flag-tc","flag-td","flag-tf","flag-tg","flag-th","flag-tj","flag-tk","flag-tl","flag-tm","flag-tn","flag-to","flag-tr","flag-tt","flag-tv","flag-tw","flag-tz","flag-ua","flag-ug","flag-um","flag-un","us","flag-uy","flag-uz","flag-va","flag-vc","flag-ve","flag-vg","flag-vi","flag-vn","flag-vu","flag-wf","flag-ws","flag-xk","flag-ye","flag-yt","flag-za","flag-zm","flag-zw","flag-england","flag-scotland","flag-wales"]}];var v=function e(){TS.emoji.setUpEmoji()};var b=function e(){if(TS.client&&TS.model.ms_logged_in_once){TS.view.rebuildMentions();TS.view.rebuildStars();TS.model.previewed_file_id&&TS.client.ui.files.rebuildFilePreview()}};var w=function e(){if(S.unaltered_data){S.data=JSON.parse(JSON.stringify(S.unaltered_data));S.inits={}}S.ts_init_colons()};var y=function e(){TS.emoji.setEmojiMode();TS.emoji.makeMenuLists();var n=!!TS.model.ms_logged_in_once;var t=true;TS.client&&n&&TS.client.ui.rebuildAll(t);TS.redux&&TS.interop&&TS.interop.redux&&TS.redux.dispatch(TS.interop.redux.features.customEmoji.updateCustomEmoji())};var k=function e(n,t,o){if(!S)return;var r=TS.storage.fetchCustomEmoji();if(!r){TS.logError("error_updating_emoji","Attempting to update custom emoji, but no custom emoji data is in local storage");return}if("undefined"===typeof t){delete TS.model.emoji_use[n];if(!r.data.hasOwnProperty(n))return;delete r.data[n];var a=_.remove(TS.model.emoji_map,{name:n});TS.boot_data.feature_emoji_by_id&&a.forEach(function(e){delete TS.model.emoji_map_by_id[e.id]})}else r.data[n]=t;TS.model.emoji_cache_ts=o;TS.storage.storeCustomEmoji({data:r.data,cache_ts:TS.model.emoji_cache_ts});j(r.data)};var j=function e(n){w();TS.emoji.ingestCustoms(n);y()};var x=function e(){var n=TS.model.all_custom_emoji;TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(n=C(n));return n};var O=function e(n){return!!a[n]};var E=function e(n){return TS.prefs&&TS.prefs.getPref(n)};var C=function e(n){return _.filter(n,function(e){return!O(e)})};var M=function e(){var n=TS.ui.frecency.getMostCommonWithPrefix(s,c);n=_.map(n,"id");if(!n.length)return[];var t=TS.emoji.getChosenSkinTone(true);var o=_.keyBy(TS.model.emoji_map,"id");var r=[];return _.chain(n).map(function(e){var n=o[e];if(!n)return null;var a=n.display_name;t&&n.is_skin&&(a=a+"::"+t);var i=h[a];if(!i)return null;if(TS.emoji.emojiHasAliases(i)){var s=i.names.split(" ");for(var l=0;l<s.length;l++){var c=TS.emoji.stripWrappingColons(s[l]);if(_.includes(r,c))return null}}r.push(a);return a}).compact().take(l).value()}})()},249:function(e,n,t){var o=t(86);o(o.S+o.F,"Object",{assign:t(250)})},250:function(e,n,t){"use strict";var o=t(98);var r=t(132);var a=t(111);var i=t(120);var s=t(133);var l=Object.assign;e.exports=!l||t(73)(function(){var e={};var n={};var t=Symbol();var o="abcdefghijklmnopqrst";e[t]=7;o.split("").forEach(function(e){n[e]=e});return 7!=l({},e)[t]||Object.keys(l({},n)).join("")!=o})?function e(n,t){var l=i(n);var c=arguments.length;var _=1;var u=r.f;var d=a.f;while(c>_){var f=s(arguments[_++]);var m=u?o(f).concat(u(f)):o(f);var p=m.length;var g=0;var S;while(p>g)d.call(f,S=m[g++])&&(l[S]=f[S])}return l}:l},261:function(e,n,t){var o=t(111);var r=t(83);var a=t(66);var i=t(115);var s=t(60);var l=t(136);var c=Object.getOwnPropertyDescriptor;n.f=t(56)?c:function e(n,t){n=a(n);t=i(t,true);if(l)try{return c(n,t)}catch(e){}if(s(n,t))return r(!o.f.call(n,t),n[t])}},275:function(e,n,t){e.exports={default:t(287),__esModule:true}},276:function(e,n,t){var o=t(91)("meta");var r=t(68);var a=t(60);var i=t(58).f;var s=0;var l=Object.isExtensible||function(){return true};var c=!t(73)(function(){return l(Object.preventExtensions({}))});var _=function(e){i(e,o,{value:{i:"O"+ ++s,w:{}}})};var u=function(e,n){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,o)){if(!l(e))return"F";if(!n)return"E";_(e)}return e[o].i};var d=function(e,n){if(!a(e,o)){if(!l(e))return true;if(!n)return false;_(e)}return e[o].w};var f=function(e){c&&m.NEED&&l(e)&&!a(e,o)&&_(e);return e};var m=e.exports={KEY:o,NEED:false,fastKey:u,getWeak:d,onFreeze:f}},277:function(e,n,t){var o=t(66);var r=t(191).f;var a={}.toString;var i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var s=function(e){try{return r(e)}catch(e){return i.slice()}};e.exports.f=function e(n){return i&&"[object Window]"==a.call(n)?s(n):r(o(n))}},287:function(e,n,t){t(125);t(148);e.exports=t(156).f("iterator")},288:function(e,n,t){e.exports={default:t(289),__esModule:true}},289:function(e,n,t){t(290);t(293);t(294);t(295);e.exports=t(52).Symbol},290:function(e,n,t){"use strict";var o=t(46);var r=t(60);var a=t(56);var i=t(86);var s=t(168);var l=t(276).KEY;var c=t(73);var _=t(109);var u=t(119);var d=t(91);var f=t(43);var m=t(156);var p=t(157);var g=t(291);var S=t(292);var h=t(71);var T=t(68);var v=t(66);var b=t(115);var w=t(83);var y=t(163);var k=t(277);var j=t(261);var x=t(58);var O=t(98);var E=j.f;var C=x.f;var M=k.f;var A=o.Symbol;var L=o.JSON;var F=L&&L.stringify;var I="prototype";var B=f("_hidden");var P=f("toPrimitive");var N={}.propertyIsEnumerable;var z=_("symbol-registry");var D=_("symbols");var U=_("op-symbols");var W=Object[I];var $="function"==typeof A;var q=o.QObject;var R=!q||!q[I]||!q[I].findChild;var G=a&&c(function(){return 7!=y(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,n,t){var o=E(W,n);o&&delete W[n];C(e,n,t);o&&e!==W&&C(W,n,o)}:C;var V=function(e){var n=D[e]=y(A[I]);n._k=e;return n};var H=$&&"symbol"==typeof A.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof A};var K=function e(n,t,o){n===W&&K(U,t,o);h(n);t=b(t,true);h(o);if(r(D,t)){if(o.enumerable){r(n,B)&&n[B][t]&&(n[B][t]=false);o=y(o,{enumerable:w(0,false)})}else{r(n,B)||C(n,B,w(1,{}));n[B][t]=true}return G(n,t,o)}return C(n,t,o)};var J=function e(n,t){h(n);var o=g(t=v(t));var r=0;var a=o.length;var i;while(a>r)K(n,i=o[r++],t[i]);return n};var Y=function e(n,t){return void 0===t?y(n):J(y(n),t)};var Q=function e(n){var t=N.call(this,n=b(n,true));if(this===W&&r(D,n)&&!r(U,n))return false;return!(t||!r(this,n)||!r(D,n)||r(this,B)&&this[B][n])||t};var X=function e(n,t){n=v(n);t=b(t,true);if(n===W&&r(D,t)&&!r(U,t))return;var o=E(n,t);!o||!r(D,t)||r(n,B)&&n[B][t]||(o.enumerable=true);return o};var Z=function e(n){var t=M(v(n));var o=[];var a=0;var i;while(t.length>a)r(D,i=t[a++])||i==B||i==l||o.push(i);return o};var ee=function e(n){var t=n===W;var o=M(t?U:v(n));var a=[];var i=0;var s;while(o.length>i)!r(D,s=o[i++])||t&&!r(W,s)||a.push(D[s]);return a};if(!$){A=function e(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var n=d(arguments.length>0?arguments[0]:void 0);var t=function(e){this===W&&t.call(U,e);r(this,B)&&r(this[B],n)&&(this[B][n]=false);G(this,n,w(1,e))};a&&R&&G(W,n,{configurable:true,set:t});return V(n)};s(A[I],"toString",function e(){return this._k});j.f=X;x.f=K;t(191).f=k.f=Z;t(111).f=Q;t(132).f=ee;a&&!t(127)&&s(W,"propertyIsEnumerable",Q,true);m.f=function(e){return V(f(e))}}i(i.G+i.W+i.F*!$,{Symbol:A});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ne.length>te;)f(ne[te++]);for(var oe=O(f.store),re=0;oe.length>re;)p(oe[re++]);i(i.S+i.F*!$,"Symbol",{for:function(e){return r(z,e+="")?z[e]:z[e]=A(e)},keyFor:function e(n){if(!H(n))throw TypeError(n+" is not a symbol!");for(var t in z)if(z[t]===n)return t},useSetter:function(){R=true},useSimple:function(){R=false}});i(i.S+i.F*!$,"Object",{create:Y,defineProperty:K,defineProperties:J,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});L&&i(i.S+i.F*(!$||c(function(){var e=A();return"[null]"!=F([e])||"{}"!=F({a:e})||"{}"!=F(Object(e))})),"JSON",{stringify:function e(n){var t=[n];var o=1;var r,a;while(arguments.length>o)t.push(arguments[o++]);a=r=t[1];if(!T(r)&&void 0===n||H(n))return;S(r)||(r=function(e,n){"function"==typeof a&&(n=a.call(this,e,n));if(!H(n))return n});t[1]=r;return F.apply(L,t)}});A[I][P]||t(64)(A[I],P,A[I].valueOf);u(A,"Symbol");u(Math,"Math",true);u(o.JSON,"JSON",true)},291:function(e,n,t){var o=t(98);var r=t(132);var a=t(111);e.exports=function(e){var n=o(e);var t=r.f;if(t){var i=t(e);var s=a.f;var l=0;var c;while(i.length>l)s.call(e,c=i[l++])&&n.push(c)}return n}},292:function(e,n,t){var o=t(114);e.exports=Array.isArray||function e(n){return"Array"==o(n)}},293:function(e,n){},294:function(e,n,t){t(157)("asyncIterator")},295:function(e,n,t){t(157)("observable")},3:function(e,n,t){"use strict";n.__esModule=true;var o=t(224);var r=a(o);function a(e){return e&&e.__esModule?e:{default:e}}n.default=r.default||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}},3077:function(e,n){(function(){TS.registerModule("incremental_boot",{onStart:function e(){TS.channels.switched_sig.add(s);TS.ims.switched_sig.add(s);TS.groups.switched_sig.add(s);TS.mpims.switched_sig.add(s);TS.redux.socket.connectedSig.addOnce(s)},startIncrementalBoot:function n(){if(TS._did_incremental_boot)return Promise.reject(new Error("_startIncrementalBoot called more than once; this is a programming error."));TS._did_incremental_boot=true;var t=TS.boot_data.incremental_boot_data;delete TS.boot_data.incremental_boot_data;var o={canonical_avatars:true,include_full_users:true,count:TS.model.initial_msgs_cnt-1,ignore_replies:true,include_pin_count:true,no_members:true,name_tagging:true,no_user_profile:true};var r=l();if(r){TS.model.c_name_in_url=r;o.name=r;TS.log(123,"Performing incremental boot for channel in URL: "+r)}else{var i=localStorage[c()];if(i){o.channel=i;TS.log(123,"Performing incremental boot for channel from history: "+i)}}a(true);TS.model.change_channels_when_offline=false;var s=u("conversations.view",o);return s.then(function(n){TS._incremental_boot=true;var o=e(t,n.data);return{ok:true,data:o,args:n.args}}).catch(function(e){TS.warn("Incremental boot failed with error: "+e);TS._incremental_boot=false;TS._did_incremental_boot=false;TS.model.change_channels_when_offline=true;a(false);throw e})},beforeFullBoot:function e(){if(!TS._incremental_boot)return;if(!TS._did_incremental_boot)return;if(TS._did_full_boot)return;TS._incremental_boot=false;t=setTimeout(r,1e4);TS.client&&TS.client.ui&&TS.client.ui.$messages_input_container&&TS.client.ui.$messages_input_container.one(n,r);TS.redux.socket.connectedSig.addOnce(r)},afterFullBoot:function e(){if(TS._did_incremental_boot){TS._did_full_boot=true;TS.model.change_channels_when_offline=true}a(false);TS.redux.dispatch(TS.interop.redux.features.incrementalBoot.setFullyBooted(true))},shouldIncrementalBoot:function e(){if(TS._did_incremental_boot)return false;if(!TS.boot_data.incremental_boot_data)return false;if(TS.model.ms_logged_in_once)return false;if(false===_.get(TS.boot_data.incremental_boot_data,"self.prefs.seen_welcome_2",void 0)||false===TS.boot_data.prefs_seen_welcome_2){delete TS.boot_data.incremental_boot_data;return false}if("client"!==TS.boot_data.app||0!==location.pathname.indexOf("/messages")){delete TS.boot_data.incremental_boot_data;return false}return true},userDidInteractWithUI:function e(){TS.sounds.play("beep");r()},getInitialChannelsToUpsert:function e(){return o}});var e=function e(n,t){var o=t;o.channels=o.channels||[];o.groups=o.groups||[];o.ims=o.ims||[];o.mpims=o.mpims||[];var r=o.channel||o.group||o.im;TS.model.initial_cid=r.id;delete o.channel;delete o.group;o.history&&o.history.messages?r.msgs=o.history.messages:r.msgs=[];TS.pins&&o.history&&TS.pins.updateCount(r,o.history.pin_count);Object.keys(n).forEach(function(e){o[e]=_.merge(n[e],o[e])});if(!o.self||o.self.id!=TS.boot_data.user_id)throw new Error("Missing `self` from incremental boot data");_.find(o.users,{id:o.self.id})||o.users.push(o.self);o.users=[o.self];o.users.forEach(function(e){"USLACKBOT"!==e.id&&e.id!=TS.boot_data.user_id||(e.presence="active");delete e.updated});if(r.is_channel)i(r,o.channels);else if(r.is_mpim)i(r,o.mpims);else if(r.is_group)i(r,o.groups);else{if(!r.is_im)throw new Error("Unexpected model object type from channels.view");i(r,o.ims)}return o};var n="change.incremental_boot keydown.incremental_boot paste.incremental_boot";var t;var o=[];var r=function e(){if(TS.client&&TS.client.ui&&TS.client.ui.$messages_input_container){TS.client.ui.$messages_input_container.off(n);TS.client.ui.$messages_input_container.removeClass("pretend-to-be-online")}TS.redux.socket.connectedSig.remove(e);if(t){clearTimeout(t);t=void 0}};var a=function e(n){$("#col_channels, #team_menu").toggleClass("placeholder",n);$(document.body).toggleClass("incremental_boot",n)};var i=function e(n,t){var o=_.find(t,{id:n.id});o?_.extend(o,n):t.push(n)};var s=function e(){var n=TS.shared.legacyGetActiveModelOb();try{if(n&&n.id){localStorage[c()]=n.id;localStorage[window.boot_data.api_token+"_last_model_ob_id"]=n.id}else delete localStorage[c()]}catch(e){}};var l=function e(){var n=location.pathname.match(/\/messages\/([^\/]+)/);return n&&n[1]};var c=function e(){return window.boot_data.team_id+"_"+window.boot_data.user_id+"_incr_boot_last_model_ob_id_v2"};var u=function e(n,t){return new Promise(function(e,o){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4!==r.readyState)return;if(200!==r.status){o(new Error("Received non-200 response from "+n));return}var a=JSON.parse(r.responseText);if(!a.ok){o(new Error("Received not-OK from "+n));return}e({ok:true,args:t,data:a})};r.onerror=function(){o(new Error("XHR encountered an error"))};var a=new FormData;Object.keys(t).forEach(function(e){return a.append(e,t[e])});a.append("token",window.boot_data.api_token);var i=""+window.boot_data.api_url+n;r.open("POST",i,!t._synchronously);r.setRequestHeader("X-Slack-Version-Ts",TS.boot_data.version_ts);r.send(a)})}})()},3078:function(e,n){(function(){TS.registerModule("redux",{onStart:function e(){t(TS.interop.redux.configureStore({teamId:o()}))},bindSelectorToStore:function n(t){if(!t)throw new Error("bindSelectorToStore: selector is undefined.");return function(n,o,a,i,s,l,c){if(!e){TS.console.error("Attempting to use a redux selector before the redux store is initialized, returning undefined instead. Selector is: "+t);return}var _=r(t);if(!_){TS.console.error("Selector "+t+" cannot be found. Either it doesn't exist or it hasn't yet been initialized. Returning undefined instead");return}if(_&&_.length>7)throw new Error("bindSelectorToStore only supports selectors accepting up to 7 parameters. This should be more than enough for any use case");return _.call(void 0,TS.redux.getState(),n,o,a,i,s,l,c)}},getState:function n(){var t=e&&e.getState&&e.getState();if(!t){TS.error("No redux state found. The redux store must not be initialized yet");TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")}return t},getStoreInstance:function n(){if(!e){TS.error("No redux store found. The redux store must not be initialized yet");TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")}return e},dispatch:function n(t){if(t&&e&&e.dispatch)return e.dispatch(t);if(!t){TS.error("No action provided?");return}TS.error("No dispatch function available. The redux store must not be initialized yet");TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")},test:{onStart:function e(){t(window.slackCreateTestStore({teamId:o()}))}}});var e;var n={};function t(n){e=n;TS.redux.dispatch(TS.interop.redux.features.experiments.bulkAddExperiments(TS.boot_data.experiment_assignments));TS.redux.dispatch(TS.interop.redux.features.bootData.setBootData(TS.boot_data));TS.interop.desktop.isDesktop&&a()}function o(){return TS.boot_data.team_id||"NO_TEAM_ID"}function r(e){var t=n[e];if(t)return t;t=_.get(window,e);if(!t)return;n[e]=t;return t}function a(){TS.redux.dispatch(TS.interop.redux.createDesktopDelegate());var e=TS.interop.redux.getDelegateForLegacy(window.desktop.delegates[o()]);_.assign(TS.interop,{webapp:e});_.assign(TSSSB,e)}})()},3079:function(e,n){(function(){TS.registerModule("metrics",{onStart:function e(){TS.web&&TS.web.login_sig.add(TS.metrics.onLogin);TS.client&&TS.client.login_sig.add(TS.metrics.onLogin)},onLogin:function e(){TS.interop.metrics.setUser(TS.model&&TS.model.user&&TS.model.user.id||"").setTeam(TS.model&&TS.model.team&&TS.model.team.id||"").setTeamSize(TS.model&&TS.model.members&&TS.model.members.length||0).setVersionTs(TS.boot_data.version_ts).setEndpointUrl(TS.boot_data.beacon_timing_url||window.ts_endpoint_url).setLogDomNodeCount(TS.utility.enableFeatureForUser(1)).setSSBMemoryLogging(TS.boot_data.feature_electron_memory_logging&&TS.model.is_electron&&"client"===TS.boot_data.app).start()},mark:function e(n){TS.interop.metrics.mark(n)},getLatestMark:function e(n){return TS.interop.metrics.getLatestMark(n)},clearMarks:function e(n){TS.interop.metrics.clearMarks(n)},measure:function e(n,t,o,r){return TS.interop.metrics.measure(n,t,o,r)},measureAndClear:function e(n,t){return TS.interop.metrics.measureAndClear(n,t)},store:function e(n,t,o){return TS.interop.metrics.store(n,t,o)},count:function e(n,t){TS.interop.metrics.count(n,t)},flush:function e(){TS.interop.metrics.sendDataAndEmptyQueue()}})})()},3080:function(e,n){(function(){TS.registerModule("statsd",{onStart:function e(){var n=3e4;var t=5e3;var o=Math.floor(Math.random()*t);setInterval(r,n+o);$(window).on("beforeunload",r)},count:function e(n,t){_.isUndefined(t)&&(t=1);o(n,"count",t)},timing:function e(n,t){o(n,"timing",t)},flush:function e(){r()},mark:function e(n){TS.metrics.mark(n)},clearMarks:function e(n){TS.metrics.clearMarks(n)},measure:function e(n,t,o){var r=TS.metrics.measure(n,t,o,{ephemeral:true});if(_.isNaN(r)||_.isUndefined(r))return;TS.statsd.timing(n,r);return r},measureAndClear:function e(n,t){var o=TS.statsd.measure(n,t);TS.statsd.clearMarks(t);return o},test:function e(){var n={getStats:function e(){return t},reset:function e(){t=[]}};Object.defineProperty(n,"_record",{get:function e(){return o},set:function e(n){o=n}});Object.defineProperty(n,"_sendDataAndEmptyQueue",{get:function e(){return r},set:function e(n){r=n}});return n}});var e=2e3;var n;var t=[];var o=function e(n,o,r){var a;if("count"===o){a=" (count)";r=_.round(r,0)}else{if("timing"!==o){TS.error("TS.statsd._record called with invalid type: "+o);return}a="ms";r=_.round(r,3)}i(n)&&TS.info("[STATSD "+o.toUpperCase()+"] "+n+": "+r+a);t.push({stat:n,type:o,value:r})};var r=function n(){if(!t.length)return;var o=[];var r=[];var s="";var l=function e(n){return a()+"?stats="+encodeURIComponent(JSON.stringify(n))};t.forEach(function(n){r.push(n);s=l(r);if(s.length>e){r.pop();o.push(l(r));r=[n]}});o.push(l(r));o.forEach(function(e){var n=new Image;n.src=e});i()&&TS.info("[STATSD] Sending data: "+JSON.stringify(t));t=[]};var a=function e(){if(n)return n;if(TS.environment.is_dev){var t=location.host.match(/^([^.]+\.)?(?:enterprise\.)?((dev|qa)[0-9]*)\.slack\.com/)[2];n="https://"+t+".slack.com/beacon/statsd"}else n=location.host.match(/staging.slack.com/)?"https://staging.slack.com/beacon/statsd":"https://slack.com/beacon/statsd";return n};var i=function e(n){if(!n)return TS.qs_args.log_timings||true===TS.statsd.log;return TS.qs_args.log_timings||TS.qs_args.log_timing===n||true===TS.statsd.log||TS.statsd.log===n||TS.statsd.log instanceof Array&&-1!==TS.statsd.log.indexOf(n)}})()},3081:function(e,n){(function(){TS.registerModule("model",{did_we_load_with_user_cache:false,did_we_load_with_emoji_cache:false,did_we_load_with_app_cache:false,did_we_load_with_cmd_cache:false,api_url:"",api_token:"",async_api_url:"",webhook_url:"",user:null,team:null,can_add_ura:null,ims:null,channels:null,groups:null,mpims:null,members:null,rooms:null,bots:null,user_groups:null,idp_groups:null,apps:{},files:[],requested_channel_joins:{},archives_and_recreated_groups:{},last_team_name:"",initial_cid:"",enterprise:null,initial_unread_view:false,initial_threads_view:false,initial_app_space_view:false,initial_search_view:false,RESERVED_KEYWORDS:["channel","here","everyone","slackbot","siackbot","canal","aqu\xed","todos","hier","alle","cha\xeene","chaine","ici","tous","\u30c1\u30e3\u30f3\u30cd\u30eb","\u3053\u3053","\u5168\u54e1"],NAMED_VIEWS:[{id:"Vall_unreads",name:TS.interop.i18n.t("All Unreads","model")(),is_view:true},{id:"Vall_threads",name:TS.interop.i18n.t("Threads","threads")(),alt_names:[TS.boot_data.feature_threads_copy_change?TS.interop.i18n.t("Threads","threads")():TS.interop.i18n.t("All Threads","threads")(),TS.interop.i18n.t("New Threads","threads")()],is_view:true},{id:"Vapp_space",name:TS.interop.i18n.t("Apps","model")(),is_view:true}],unsent_msgs:{},display_unsent_msgs:{},inline_img_byte_limit:2097152,inline_img_pixel_limit:36152320,last_reads_set_by_client:{},ms_logged_in_once:false,ds_asleep:false,ds_connected:false,ds_connecting:false,ds_logged_in_once:false,window_unloading:false,active_cid:null,last_active_cid:null,active_group_id:null,active_channel_id:null,active_im_id:null,active_mpim_id:null,active_history:[],all_custom_emoji:[],user_hiddens:[],user_colors:{},emoji_use:{},at_channel_suppressed_channels:null,push_at_channel_suppressed_channels:null,loud_channels:null,never_channels:null,loud_channels_set:null,push_loud_channels:null,push_mention_channels:null,push_loud_channels_set:null,your_user_group_regex:{},channel_sort:"alphabetical",inline_attachments:{},inline_imgs:{},inline_videos:{},inline_others:{},inline_audios:{},expandable_state:{},native_video_embed_height:320,native_video_embed_height_flexpane:240,native_media_preload_limit_bytes:2097152,is_msg_rate_limited:false,ds_reconnect_ms:0,ds_reconnect_time:0,rtd_start_throttler:0,initial_msgs_cnt:50,subsequent_msgs_cnt:100,special_initial_msgs_cnt:100,hard_msg_limit:500,all_unread_cnt:0,all_unread_highlights_cnt:0,all_unread_cnt_to_exclude:0,all_unread_highlights_cnt_to_exclude:0,threads_has_unreads:false,threads_mention_count:0,threads_mention_counts:{},c_name_in_url:"",flex_name_in_url:"",flex_extra_in_url:"",flex_names:["files","team","search","stars","mentions","details","whats_new","convo","apps","calendar"],default_flex_name:"files",ui_state:null,input_history:null,input_history_index:-1,input_cursor_positions:{},previewed_file_id:null,last_previewed_file_id:null,previewed_member_name:null,previewed_member_id:null,last_previewed_member_id:null,previewed_user_group_id:null,last_previewed_user_group_id:null,channel_name_max_length:TS.boot_data.feature_longer_channel_names?80:21,channel_purpose_max_length:250,channel_topic_max_length:250,upload_file_size_limit_bytes:1073741824,model_ob_id_length:9,msg_activity_interval:5,archive_view_is_showing:false,menu_is_showing:false,overlay_is_showing:false,unread_view_is_showing:false,threads_view_is_showing:false,app_space_view_is_showing:false,search_view_is_showing:false,seen_onboarding_this_session:false,seen_welcome_2:true,showing_welcome_2:false,cancelled_welcome_2_this_session:false,show_inline_img_size_pref_reminder:false,shown_inline_img_size_pref_reminder_once:false,last_key_down_e:null,group_prefix:"",ms_conn_log:[],ds_conn_log:[],mac_ssb_version:TS.interop.environment.mac_ssb_version,mac_ssb_version_minor:TS.interop.environment.mac_ssb_version_minor,mac_ssb_build:TS.interop.environment.mac_ssb_build,win_ssb_version:TS.interop.environment.win_ssb_version,win_ssb_version_minor:TS.interop.environment.win_ssb_version_minor,lin_ssb_version:TS.interop.environment.lin_ssb_version,lin_ssb_version_minor:TS.interop.environment.lin_ssb_version_minor,desktop_app_version:TS.interop.environment.desktop_app_version,supports_downloads:false,supports_spaces_in_windows:false,supports_growl_subtitle:false,supports_voice_calls:false,supports_video_calls:false,supports_screen_sharing:false,supports_screenhero:false,supports_mmap_minipanel_calls:false,active_file_list_filter:"all",active_file_list_member_filter:"all",file_list_types:null,shift_key_pressed:false,insert_key_pressed:false,alt_key_pressed:false,join_leave_subtypes:["channel_leave","channel_join","group_leave","group_join"],file_list_type_map:{all:TS.interop.i18n.t("All File Types","model")(),posts:TS.interop.i18n.t("Posts","model")(),spaces:TS.interop.i18n.t("Posts","model")(),docs:"Arugula",snippets:TS.interop.i18n.t("Snippets","model")(),emails:TS.interop.i18n.t("Emails","model")(),images:TS.interop.i18n.t("Images","model")(),videos:TS.interop.i18n.t("Videos","model")(),pdfs:TS.interop.i18n.t("PDF Files","model")(),spreadsheets:TS.interop.i18n.t("Spreadsheets","model")(),gdocs:TS.interop.i18n.t("Google Docs","model")()},marked_reasons:{viewed:"viewed",left:"left",esc:"esc",esc_all:"esc_all",closed:"closed",muted:"muted",back:"back",sent:"sent",clicked:"clicked",deleted:"deleted",none_qualify:"none_qualify"},welcome_model_ob:{},change_channels_when_offline:true,ampersands_are_inconsistent_in_from_urls:true,ui:{cached_file_preview_scroller_rect:null,cached_msgs_scroller_rect:null,cached_msgs_scroll_result:null,cached_search_scroller_rect:null,cached_archives_scroller_rect:null,cached_archive_scroll_result:null,cached_convo_scroller_rect:null,cached_unread_scroller_rect:null,cached_threads_scroller_rect:null,is_window_focused:!!(document.hasFocus&&document.hasFocus()),is_mouse_down:false,last_flex_extra:null,active_tab_id:null,active_tab_ts:null,debug_channel_lists:true,last_top_msg:null},client:{reads:[],last_user_active_timestamp:new Date},emoji_groups:[],emoji_names:[],emoji_map:[],emoji_map_by_id:{},emoji_complex_customs:null,frecency_jumper:{},pdf_viewer_enabled:true,onStart:function e(){var n=[];TS.model.is_electron&&TS.model.is_mac&&TS.interop.desktop.isMainWindowFrameless()&&n.push("is_electron_mac");TS.model.is_electron&&n.push("is_electron");$("html").addClass(n.join(" "));TS.model.supports_growl_subtitle=!!(TS.model.mac_ssb_version&&TS.interop.environment.isSSBAndAtLeastVersion("2.2"));var t=false;Object.defineProperty(TS.model,"dialog_is_showing",{get:function e(){return t},set:function e(n){t=n},enumerable:true,configurable:true});TS.model.supports_voice_calls=TS.model.is_our_app&&TS.interop.environment.isSSBAndAtLeastVersion("2.5.2")||TS.model.is_chrome_desktop;TS.model.supports_video_calls=TS.model.supports_voice_calls;TS.model.supports_screen_sharing=TS.model.is_our_app&&TS.model.supports_voice_calls;TS.model.supports_screenhero=false;TS.model.supports_mmap_minipanel_calls=false;if(window.desktop&&desktop.calls&&desktop.calls.requestCapabilities){var o=desktop.calls.requestCapabilities();if(o){o.supports_screenhero&&!o.is_mas&&(TS.model.supports_screenhero=true);o.supports_mmap_minipanel&&(TS.model.supports_mmap_minipanel_calls=true)}}TS.model.supports_spaces_in_windows=false;window.desktop&&desktop.window&&desktop.window.list&&(TS.model.supports_spaces_in_windows=true);TS.boot_data.special_flex_panes&&_.forOwn(TS.boot_data.special_flex_panes,function(e){TS.model.flex_names.push(e.flex_name)});var r=TS.storage.fetchExpandableState();TS.model.expandable_state=r},addProfilingKeyTime:function e(n,t){if(!t||!n)return;TS.model.profiling_key_times||(TS.model.profiling_key_times=[]);TS.model.profiling_key_times.push({name:n,ms:t})},incrementUnknownIdHandled:function n(t){e[t]=e[t]||{tries:0,state:0};var o=e[t];o.tries+=1;o.state=0;o.tries>2?TS.maybeError(48,'calling the API for id: "'+t+'", try #'+o.tries):o.tries>1?TS.maybeWarn(48,'calling the API for id: "'+t+'", try #'+o.tries):TS.log(48,'calling the API for id: "'+t+'", try #'+o.tries);return o.tries},reportResultOfUnknownIdHandled:function n(t,o){var r=e[t];if(!r)return;r.state=o?1:-1;1==r.state?TS.log(48,'API call for id: "'+t+'" SUCCEEDED, try #'+r.tries):TS.maybeWarn(48,'API call for id: "'+t+'" FAILED, try #'+r.tries)},logUnknownIdsHandled:function e(n,o){var r=t(n,o);TS.info("_unknown_ids_handled: "+JSON.stringify(r,null,2))},getUnknownIdsHandled:function e(n,o){return t(n,o)},test:function e(){return{getOSXVersion:r,isWin7Plus:o,sniffUserAgent:a}},getBroadcastKeywordById:function e(n){var t=_.find(TS.interop.broadcast_keywords.getAllBroadcastKeywords(),{id:n});if(!t){TS.warn("no broadcast_keyword ob found for "+n);return}return t},getViewById:function e(n){var t=_.find(TS.model.NAMED_VIEWS,{id:n});if(!t){TS.warn("no view ob found for "+n);return}return t},isSSB:function e(){return TS.model.is_our_app},legacyGetYourUserGroupRegExp:function e(){return TS.model.your_user_group_regex}});_.merge(TS.model,a(navigator.userAgent));var e={};var n=[-1,0,1];var t=function t(o,r){o=parseInt(o,10)||1;r=_.includes(n,r)?r:"any";var a={};Object.keys(e).forEach(function(n){var t=e[n];if(o>t.tries)return;if("any"!==r&&t.state!=r)return;a[n]=e[n]});return{state:r,min_tries:o,count:Object.keys(a).length,obs:a}};function o(e){var n=e.match(/Windows NT ([0-9]+\.[0-9]+)\b/);if(!n||n.length<2)return false;return parseInt(n[1],10)>=6}function r(e){var n=e.match(/(?:Mac OS X )([0-9][0-9]_[0-9]+)(_[0-9])?/);n||(n=e.match(/(?:Mac OS X )([0-9][0-9]\.[0-9]+)(\.[0-9])?/));if(!n||!n[1])return 0;return n[1].replace("_",".")}function a(e){var n=/(OS X)/g.test(e);var t=-1!==e.indexOf("Windows");var a=/(WOW64|Win64)/g.test(e);var i=-1!==e.indexOf("Linux");var s=-1!==e.indexOf("CrOS");var l=/(iPad|iPhone|iPod)/g.test(e);var c=/(Android)/g.test(e);var _=/(Edge)/g.test(e);var u=/(Chrome)/g.test(e)&&!_;var d=u&&(l||c);var f=/(Slack)/g.test(e);var m=/(MSIE|Trident)/g.test(e);var p=/(Firefox)/g.test(e);var g=/(Safari)/g.test(e);var S=/(AtomShell)/g.test(e);return{is_iOS:l,is_IE:m,is_FF:p,is_edge:_,is_chrome_desktop:u&&!d&&!f,is_chrome_mobile:d,is_safari_desktop:g&&!u&&n&&!l,is_mac:n,mac_version:r(e)||void 0,is_win:t,is_win_64:a,is_win_7_plus:o(e),is_lin:i,is_cros:s,is_our_app:f,is_electron:S}}})()},3082:function(e,n){(function(){TS.registerModule("environment",{is_apple_webkit:false,is_dev:false,is_retina:false,retina_changed_sig:new signals.Signal,supports_sticky_position:false,supports_custom_scrollbar:false,slim_scrollbar:false,supports_line_clamp:false,supports_intersection_observer:false,onStart:function e(){c();a();u()},doesSupportStickyPosition:function e(){return TS.environment.supports_sticky_position},test:function e(){var n={_decoratePageWithSupport:a,_initialSetup:c};Object.defineProperty(n,"cssPropertySupported",{get:function e(){return i},set:function e(n){i=n}});Object.defineProperty(n,"cssValueSupported",{get:function e(){return s},set:function e(n){s=n}});return n}});var e=["-webkit-","-moz-","-o-","-ms-",""];var n=["Webkit","Moz","O","ms",""];var t=new RegExp("^(-*"+e.slice(0,e.length-1).join("|-*")+")");var o=new RegExp("^("+n.slice(0,n.length-1).join("|")+")");function r(){return window.devicePixelRatio>1}function a(){var e=["is_apple_webkit","supports_sticky_position","supports_custom_scrollbar","slim_scrollbar","supports_line_clamp"];var n=_.partition(e,function(e){return TS.environment[e]});var t=$("html");t.addClass(n[0].join(" "));t.removeClass(n[1].join(" "))}function i(e){if("scrollbar"===e)return d();var r=document.createElement("css_property_supported").style;e=e.replace(o,"").replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(t,"").toLowerCase();e=_.camelCase(e,"-");var a=_.upperFirst(e);if(void 0!==r[e])return true;return n.some(function(n){return void 0!==r[n+a]||void 0!==r[n+e]})}function s(n,o){var r=document.createElement("css_value_supported");o=o.replace(t,"").toLowerCase();r.style.cssText=n+":"+e.join(o+";"+n+":")+o+";";return!!r.style.length}function l(){TS.environment.supports_sticky_position=s("position","sticky");"Chrome"===window.bowser.name&&parseInt(window.bowser.version,10)<57&&r()&&(TS.environment.supports_sticky_position=false);TS.redux.dispatch(TS.interop.redux.models.environment.setSupportsStickyPosition(TS.environment.supports_sticky_position))}function c(){TS.environment.is_apple_webkit=!!(TS.model.mac_ssb_version||TS.model.is_safari_desktop);TS.environment.is_dev="dev"===TS.boot_data.version_ts;TS.environment.is_retina=r();TS.environment.supports_custom_scrollbar=i("scrollbar");TS.environment.slim_scrollbar=TS.environment.supports_custom_scrollbar&&TS.boot_data.feature_slim_scrollbar;TS.environment.supports_line_clamp=i("line-clamp");TS.environment.supports_intersection_observer="function"===typeof IntersectionObserver;l()}function u(){if(window.matchMedia){var e="screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min--moz-device-pixel-ratio: 1.5), screen and (min-device-pixel-ratio: 1.5)";window.matchMedia(e).addListener(function(){var e=TS.environment.is_retina;TS.environment.is_retina=r();if(TS.environment.is_retina===e)return;TS.info("TS.environment.is_retina changed from "+e+" to "+TS.environment.is_retina);TS.environment.retina_changed_sig.dispatch(TS.environment.is_retina);l();a()})}}function d(){var e=document.createElement("div");e.id="__sb";e.style.overflow="scroll";e.style.width="40px";e.style.height="40px";e.style.position="absolute";e.style.left="-40px";e.innerHTML="&shy;<style>#__sb::-webkit-scrollbar {width:10px;}</style>";document.body.appendChild(e);var n=e.offsetWidth-e.clientWidth===10;document.body.removeChild(e);return n}})()},3083:function(e,n){(function(){TS.registerModule("ssb",{onStart:function e(){TS.files&&TS.files.team_file_deleted_sig.add(o)},openNewFileWindow:function e(n,o,a){i&&TS.log(i,"TS.ssb.openNewFileWindow url: "+o);if(TS.client)return TS.client.windows.openFileWindow(n.id,a);if(window.is_in_ssb){TS.ssb.upsertFileInSSBParentWin(n);if(document.ssb_main){if(document.ssb_main.TS)return document.ssb_main.TS.client.windows.openFileWindow(n.id,o);return true}if(window.desktop&&window.opener&&window.opener.executeJavaScript){i&&TS.log(i,"calling _executeInAtomSSBParentWin for TS.client.windows.openFileWindow");r("TS.client.windows.openFileWindow("+t(n.id)+", "+t(o)+");");return true}}return false},closeWindow:function e(){if(!window.is_in_ssb)return false;window.close();return true},setUpAtomSSBWin:function e(n){a(n,"window.is_in_ssb = true;");TS.shouldLog(438)&&!n._has_console&&(n._has_console=1)},upsertFileInSSBParentWin:function e(t){if(!TS.web)return;if(document.ssb_main)document.ssb_main.TS&&document.ssb_main.TS.files.upsertAndSignal(t,"upsertFileInSSBParentWin");else if(window.desktop&&window.opener&&window.opener.executeJavaScript){i&&TS.log(i,"calling _executeInAtomSSBParentWin for TS.files.upsertAndSignal");r("TS.files.upsertAndSignal("+n(t)+");")}},toggleMuteInWin:function n(t,o,r){i&&TS.log(i,"toggleMuteInWin called with token: "+t);if(!TS.client)return;var s=TS.client.windows.getWinByToken(t);if(!s){TS.error("toggleMuteInWin called with bad token: "+t);return}a(s,"window.toggleMute("+e(o)+");",r)},distributeMsgToWin:function e(t,o){i&&TS.log(i,"distributeMsgToWin called with token: "+t);if(!TS.client)return;var r=TS.client.windows.getWinByToken(t);if(!r){TS.error("distributeMsgToWin called with bad token: "+t);return}a(r,"TS.redux.dispatch(TS.interop.redux.features.socket.socketMessageReceived(("+n(o)+"));")}});var e=function e(n){return(!!n).toString()};var n=function e(n){return"JSON.parse('"+JSON.stringify(n||null)+"')"};var t=function e(n){n=String(n);n=n.replace(/"/g,'\\"');return'"'+n+'"'};var o=function e(n){if(!n)return;if(!TS.client)return;var o=TS.client.windows.getWinByProp("file_id",n.id);if(!o)return;setTimeout(function(){a(o,"window.TS.files.team_file_deleted_sig.dispatch(TS.files.getFileById("+t(n.id)+"));")},1e3)};var r=function e(n,t){return TS.interop.desktop.executeJavaScriptInParentWindow({code:n,callback:t})};var a=function e(n,t,o){return TS.interop.desktop.executeJavaScriptInWindow({window_token:n.token,code:t,callback:o})};var i=438})()},3084:function(e,n){(function(){TS.registerModule("ui",{window_focus_changed_sig:new signals.Signal,window_unloaded_sig:new signals.Signal,onStart:function e(){$(window).bind("focus",TS.ui.onWindowFocus);$(window).bind("blur",TS.ui.onWindowBlur);$("html").bind("mousedown",function(){TS.model.ui.is_window_focused||TS.interop.console.info("FOCUS-EVENT","Mousedown while !is_window_focused");TS.ui.onWindowFocus({target:window})});var t=!!(document.hasFocus&&document.hasFocus());t?TS.ui.onWindowFocus({target:window}):TS.ui.onWindowBlur({target:window});TS.model.win_ssb_version&&$("body").addClass("desktop");n()},setUpWindowUnloadHandlers:function e(){"undefined"!==typeof window.addEventListener?window.addEventListener("beforeunload",TS.ui.onWindowUnload,false):"undefined"!==typeof document.addEventListener?document.addEventListener("beforeunload",TS.ui.onWindowUnload,false):"undefined"!==typeof window.attachEvent?window.attachEvent("onbeforeunload",TS.ui.onWindowUnload):"function"===typeof window.onbeforeunload?window.onbeforeunload=function(){TS.ui.onWindowUnload();return false}:window.onbeforeunload=TS.ui.onWindowUnload},onWindowUnload:function e(){TS.client&&TS.client.markLastReadsWithAPI();TS.model.window_unloading=true;TS.ui.window_unloaded_sig.dispatch();TS.redux.dispatch(TS.interop.redux.models.window.setUnloading(true))},handleDraghoverstartFromWinSSB:function e(){TS.ui.file_share.handleDraghoverstartFromWinSSB()},handleDraghoverendFromWinSSB:function e(){TS.ui.file_share.handleDraghoverendFromWinSSB()},handleDropFromWinSSB:function e(n){TS.ui.file_share.handleDropFromWinSSB(n)},teamSelectionChanged:function e(){if(!window.desktop||!window.desktop.reduxHelper||!_.isFunction(window.desktop.reduxHelper.isSelectedTeam))return;if(TS.interop.environment.isSSBAndAtLeastVersion("3.2.0"))return;var n=window.desktop.reduxHelper.isSelectedTeam();TS.interop.console.info("FOCUS-EVENT","Team selection changed ("+n+")");n?t():o()},onWindowFocus:function e(n){if(n.target!==window&&n.target!==document)return;TS.model.ui.is_window_focused||TS.interop.console.info("FOCUS-EVENT","Window focused");t()},onWindowBlur:function e(n){if(n.target!==window&&n.target!==document)return;TS.model.ui.is_window_focused&&TS.interop.console.info("FOCUS-EVENT","Window blurred");o()},needToShowAtChannelWarning:function e(n,t){if(TS.boot_data.feature_modern_file_upload)return TS.interop.rules.channels.shouldShowAtChannelWarning(n,TS.interop.texty.getBroadcastKeywordsFromContents(TS.interop.texty.convertContentsStringToContents(t,{highlightWords:TS.interop.prefs.getHighlightWords(),shouldRenderEmojiAsText:TS.interop.rules.emoji.shouldRenderEmojiAsText(),emojiNames:TS.emoji.legacyGetEmojiNames(),useSonicEmoji:TS.boot_data.feature_sonic_emoji,locale:TS.interop.i18n.locale})));var o;var r=TS.format.cleanMsg(t);var a=TS.interop.messages.atEveryoneRegExp.test(r);var i=TS.interop.messages.atChannelRegExp.test(r);var s=TS.interop.messages.atGroupRegExp.test(r);var l=!!TS.prefs.getPref("last_seen_at_channel_warning");var c=new Date(TS.prefs.getPref("last_seen_at_channel_warning"));var _=l&&TS.interop.datetime.isSameDay(c,new Date);if(!a&&!i&&!s)return false;o=TS.redux.channels.getEntityById(n);if(!o||o.is_im)return false;if((i||s)&&!TS.permissions.members.canAtChannelOrGroup(o.id))return false;if(o.is_general&&a&&!TS.permissions.members.canAtMentionEveryone(o.id))return false;if("never"===TS.prefs.getTeamPref("warn_before_at_channel"))return false;if("once"===TS.prefs.getTeamPref("warn_before_at_channel")&&l)return false;if("daily"===TS.prefs.getTeamPref("warn_before_at_channel")&&_)return false;return true},needToBlockAtChannelKeyword:function e(n,t,o){if(TS.boot_data.feature_modern_file_upload)return TS.interop.rules.channels.checkForBlockedAtChannelKeyword(o,TS.interop.texty.getBroadcastKeywordsFromContents(TS.interop.texty.convertContentsStringToContents(n,{highlightWords:TS.interop.prefs.getHighlightWords(),shouldRenderEmojiAsText:TS.interop.rules.emoji.shouldRenderEmojiAsText(),emojiNames:TS.emoji.legacyGetEmojiNames(),useSonicEmoji:TS.boot_data.feature_sonic_emoji,locale:TS.interop.i18n.locale})));if(TS.interop.utility.looksLikeMemberId(o))return false;var r=TS.format.cleanMsg(n);var a=o&&TS.redux.channels.getEntityById(o);var i=a&&!a.is_im&&!a.is_mpim||t&&(t.channels.length||t.groups.length);if(!i)return false;var s=TS.interop.messages.atEveryoneRegExp.test(r);var l=TS.interop.messages.atHereRegExp.test(r);var c=TS.interop.messages.atChannelRegExp.test(r);var _=TS.interop.messages.atGroupRegExp.test(r);var u=false;if(a)u=!!a.is_general;else if(t&&0===t.groups.length&&1===t.channels.length){var d=TS.interop.channels.getPublicChannelById(t.channels[0]);u=!!d.is_general}if(TS.boot_data.feature_file_threads&&!u&&s)return"@everyone";if(u&&s&&!l&&!c&&!_&&TS.permissions.members.canAtMentionEveryone(o))return false;if(!TS.permissions.members.canAtChannelOrGroup(o)){if(l)return"@here";if(c)return"@channel";if(_)return"@group";if(s)return"@everyone"}var f=a&&a.is_general;!f&&t&&t.channels&&t.channels.forEach(function(e){var n=TS.interop.channels.getPublicChannelById(e);n&&n.is_general&&(f=true)});if(f&&!TS.permissions.members.canAtMentionEveryone(o)&&(s||l||_||c)){if(TS.boot_data.feature_file_threads){if(l)return"@here";if(c)return"@channel";if(_)return"@group";if(s)return"@everyone"}return"@everyone"}return false},startButtonSpinner:function n(t){TS.ui.resetButtonSpinner(t);var o=e(t);o.isLoading()||o.start()},stopButtonSpinner:function n(t,o){var r=e(t);if(r.isLoading()){r.stop();if(o){var a=$(t).find(".ladda-label").text();$(t).data("original_text",a);$(t).removeClass("").addClass("btn_success").find(".ladda-label").html('<i class="ts_icon ts_icon_check_circle_o small_right_margin"></i>'+TS.interop.i18n.t("Saved","ui")())}}},resetButtonSpinner:function n(t){var o=e(t);if(o.isLoading())return;var r=$(t).data("original_text");if(r){$(t).find(".ladda-label").text(r);$(t).removeData("original_text");$(t).removeClass("btn_success").addClass("")}},showVersionInfo:function e(){var n="version_info";var t=new Date(1e3*TS.boot_data.version_ts)+" (<b>"+TS.boot_data.version_ts+"</b>)";TS.generic_dialog.start({title:TS.interop.i18n.t("Version Info","ui")(),unique:n,body:TS.interop.i18n.t('<p>This version: {version_num}</p><p class="latest_version checking">Checking for updates&hellip;</p>',"ui")({version_num:TS.interop.i18n.safeString(t)}),show_cancel_button:false,go_button_class:"btn_outline",go_button_text:TS.interop.i18n.t("Close","ui")(),show_secondary_go_button:false,onSecondaryGo:function e(){TS.reload(false,"TS.ui.showVersionsInfo dialog")}});TS.interop.api.callExpedited("test.versionInfo").then(function(e){if(!TS.generic_dialog.is_showing||TS.generic_dialog.current_setting.unique!=n)return;var t=TS.generic_dialog.div.find(".latest_version");t.removeClass("checking");var o=e.data.version_ts.toString()==TS.boot_data.version_ts.toString();if(o)t.html(TS.interop.i18n.t("Your copy of Slack is up-to-date! {tada_emoji}","ui")({tada_emoji:TS.interop.i18n.safeString(TS.emoji.graphicReplace(":tada:"))}));else{TS.generic_dialog.div.find(".btn.dialog_secondary_go").removeClass("hidden").text("Update");var r=e.data.min_version_ts>TS.boot_data.version_ts;r?t.html(TS.interop.i18n.t("An important new version of Slack is available. {sparkles_emoji}","ui")({sparkles_emoji:TS.interop.i18n.safeString(TS.emoji.graphicReplace(":sparkles:"))})):t.html(TS.interop.i18n.t("A newer version of Slack is available. {sparkles_emoji}","ui")({sparkles_emoji:TS.interop.i18n.safeString(TS.emoji.graphicReplace(":sparkles:"))}))}}).catch(_.noop)},setThemeClasses:function e(){$("body").removeClass("dense_theme light_theme");if("dense"===TS.prefs.getPref("theme"))$("body").addClass("dense_theme");else{if("light"!==TS.prefs.getPref("theme")){TS.error("no theme?");return}$("body").addClass("light_theme")}TS.prefs.getPref("avatars")?$("body").removeClass("no_avatars"):$("body").addClass("no_avatars")}});var e=function e(n){var t=$(n).data("ladda");if(!t){t=Ladda.create(n);$(n).data("ladda",t)}return t};var n=function e(){$("body").on("click.plastic_date",'input[type="text"][data-plastic-type="date"]',function(e){var n=$(e.target);if(!n.pickmeup)return;var t=!!n.closest("#fs_modal").length||$(this).data("flat");n.pickmeup({flat:t,first_day:window.moment.localeData().firstDayOfWeek()||0,hide_on_select:true,min:$(this).data("min")||null,max:$(this).data("max")||null,format:$(this).data("format")||"Y-m-d",class_name:"plastic_date_picker",hide:function e(){n.trigger("input")},title_format:"ja-JP"===TS.interop.i18n.locale?"Y\u5e74B":"B Y",locale:{days:window.moment.weekdays(),daysShort:window.moment.weekdaysShort(),daysMin:window.moment.weekdaysMin(),months:window.moment.months(),monthsShort:window.moment.monthsShort()}}).pickmeup("show");if(t){var o=n.data("picker");if(!o){o=$('<div class="position_relative no_margin no_padding"></div>');n.data("picker",o)}n.after(o.append(n.find(".pickmeup").detach()))}}).on("keydown.plastic_date",'input[type="text"][data-plastic-type="date"]',function(e){var n=$(e.target);if(!n.pickmeup)return;window.document.activeElement===e.target&&n.pickmeup("hide")})};var t=function e(){var n=TS.interop.redux.models.window.isWindowFocused(TS.redux.getState());if(n)return;TS.model.shift_key_pressed=false;TS.model.insert_key_pressed=false;TS.model.ui.is_window_focused=true;TS.ui.window_focus_changed_sig.dispatch(true);TS.redux.dispatch(TS.interop.redux.models.window.updateFocus(true))};var o=function e(){var n=TS.interop.redux.models.window.isWindowFocused(TS.redux.getState());if(false===n)return;TS.model.shift_key_pressed=false;TS.model.insert_key_pressed=false;TS.model.ui.is_window_focused=false;TS.ui.window_focus_changed_sig.dispatch(false);TS.redux.dispatch(TS.interop.redux.models.window.updateFocus(false))}})()},3085:function(e,n){(function(){TS.registerModule("ui.file_share",{handleDraghoverstartFromWinSSB:function e(){$(window).trigger("draghoverstart",[null,true])},handleDraghoverendFromWinSSB:function e(){$(window).trigger("draghoverend")},handleDropFromWinSSB:function e(n){TS.info("handleDropFromWinSSB called files:"+n);$("body").removeClass("drop-target");if(TS.client.ui.checkForEditing())return;if(!n||!n.length){TS.warn("handleDropFromWinSSB called with no files");return}TS.client.ui.files.validateFiles(n,TS.model.shift_key_pressed)},preselected:[],bindFileShareDropdowns:function o(i,s,l,c){var u=$("#select_share_channels");var d="60%";TS.web&&TS.web.space&&(d="100%");if(1!=u.length){alert("error: "+u.length+" $('#select_share_channels')s");return}TS.ui.file_share.preselected=l||[];n=s;t=i;var f=TS.ui.file_share.promiseToGetFileShareSelectOptions;c&&(f=a);e={append:true,single:true,data_promise:f,approx_item_height:30,tab_to_nav:true,placeholder_text:TS.interop.i18n.t("Search channels and people ...","files"),template:function e(n){return new Handlebars.SafeString(TS.templates.file_sharing_channel_row({item:n.model_ob}))},onItemAdded:r,onListHidden:function e(){$("#select_share_channels .lfs_list_container").removeClass("new_channel_container")},renderDividerFunc:function e(n,t){if(t.create_channel){n.html(TS.interop.i18n.t('<span class="new">No items matched <strong>{query}</strong></span>',"files")({query:TS.interop.i18n.safeString(_.escape(t.label))}));$("#select_share_channels .lfs_list_container").addClass("new_channel_container");return}$("#select_share_channels .lfs_list_container").removeClass("new_channel_container");n.html(_.escape(t.label)).removeClass("new_channel_not_found")},setValue:function e(n){var t;var o;var r=this.data.length;var a;for(t=0;t<r;t+=1){a=this.data[t].children.length;for(o=0;o<a;o+=1)if(this.data[t].children[o].model_ob.id===n){this.$container.find('.lfs_item[data-lfs-id="'+[t,o]+'"]').trigger("click");return}}}};u.lazyFilterSelect(e);u.css({width:d});u.one("remove",function(){t=false;$(this).lazyFilterSelect("destroy")});$("#file_sharing_div").on("keydown",function(e){13==e.keyCode&&e.stopPropagation()});u.lazyFilterSelect("getInstance").current_items_in_view_signal.add(function(e){var n=e.filter(function(e){return e.model_ob&&Object.prototype.hasOwnProperty.call(e.model_ob,"presence")}).map(function(e){return e.model_ob.id});TS.presence_manager.queryMemberPresence(n)})},promiseToGetFileShareSelectOptions:function e(n){var o=i();return TS.searcher.search(n,{members:{include_self:true},channels:{include_archived:false,can_post:true},groups:{include_archived:false},mpims:true,sort:{allow_empty_query:true}}).then(function(e){var r=false;e.all_items_fetched=true;e.filter(function(e){return TS.interop.utility.looksLikeMemberId(e.model_ob.id)?TS.permissions.members.canUserSeeMember(e.model_ob):TS.permissions.members.canPostInChannel(e.model_ob)}).forEach(function(e){e.lfs_id=e.model_ob.id;e.preselected=s(e.model_ob.id,o);e.preselected&&(r=true)});var a=false;o&&(TS.interop.utility.looksLikeMemberId(o)?a=TS.redux.channels.getImByMemberId(o):TS.interop.utility.looksLikeChannelId(o)&&(a=TS.redux.channels.getEntityById(o)));if(!n&&!r&&a)if(_.get(a,"is_im")){var i=TS.interop.members.getMemberById(a.user);e.push({preselected:true,lfs_id:i.id,model_ob:i})}else a&&TS.permissions.members.canPostInChannel(a)&&e.push({preselected:true,lfs_id:a.id,model_ob:a});if(a){TS.ui.share_message_dialog.maybeToggleSharedChannelsWarning(t,a);l(a)}var c=_(e).map("model_ob").filter(function(e){return _.get(e,"id")}).filter(TS.interop.utility.looksLikeMemberId).compact().value();TS.presence_manager.queryMemberPresence(c);return e})},bindFileShareShareToggle:function e(){$("#share_cb").bind("click.toggle_select_list",function(){$(this).prop("checked")?$(".file_share_select").prop("disabled",false):$(".file_share_select").prop("disabled",true);TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()})},bindFileShareCommentField:function e(){$("#file_comment_textarea").bind("keyup",function(){TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()})},updateAtChannelWarningNote:function e(n){var t=TS.utility.contenteditable.value($("#file_comment_textarea"));var r;var a=$("#select_share_channels").lazyFilterSelect("value")[0];var i;a&&(r=a.model_ob.id||"");var s=$("#select_share_at_channel_note");if(TS.ui.needToShowAtChannelWarning(r,t)){var l=TS.format.cleanMsg(t);var c="";var u=true;TS.interop.messages.atEveryoneRegExp.test(l)?c="everyone":TS.interop.messages.atChannelRegExp.test(l)?c="channel":TS.interop.messages.atGroupRegExp.test(l)&&(c="group");var d=TS.redux.channels.getEntityById(r);d&&!d.is_im||(u=false);if(u&&!o(d)&&!n){var f=TS.interop.memberCounts.getOrFetchMemberCounts(d.id);if(f.promise){i=0;f.promise.then(TS.ui.file_share.updateAtChannelWarningNote);u=false}else{i=_.get(f,"counts.member_count",1);i-=1}}var m=[];if(_.isUndefined(i)&&u&&d&&!d.is_im){m=_(d.members).map(function(e){return TS.interop.members.getMemberById(e)}).compact().filter(TS.utility.members.isMemberNonBotNonDeletedNonSelf).sortBy(TS.interop.members.memberSorterByName).value();m.length<1&&(u=false)}if(u){var p=TS.templates.at_channel_warning_note({keyword:c,member_count:_.isUndefined(i)?m.length:i});s.html(p);s.removeClass("hidden");return}}s.addClass("hidden")},updateAtChannelBlockedNote:function e(){var n=TS.utility.contenteditable.value($("#file_comment_textarea"));var t;var o=$("#select_share_channels").lazyFilterSelect("value")[0];var r=$("#share_cb");var a=0===r.length||r.is(":checked");o&&a&&(t=o.model_ob.id);var i=$("#select_share_at_channel_blocked_note");var s=$(".modal .btn.dialog_go");var l;TS.interop.utility.looksLikeMemberId(t)||(l=TS.ui.needToBlockAtChannelKeyword(n,null,t));if(l){i.html(TS.templates.at_channel_blocked_note({keyword:l}));i.removeClass("hidden");s.addClass("disabled")}else{i.addClass("hidden");s.removeClass("disabled")}},shouldBlockUploadDialogSubmission:function e(){var n=TS.utility.contenteditable.value($("#file_comment_textarea"));var t;var o=$("#select_share_channels").lazyFilterSelect("value")[0];var r=$("#share_cb");var a=0===r.length||r.is(":checked");o&&a&&(t=o.model_ob.id);var i;TS.interop.utility.looksLikeMemberId(t)||(i=TS.ui.needToBlockAtChannelKeyword(n,null,t));if(i){TS.info("Can't submit dialog because comment contains "+i);return true}return false},fileShowPublicUrlDialog:function e(n){var t=c(n);if(!t||!t.public_url_shared)return;var o=$('<input type="text" id="public_url" class="full_width small">').attr("value",t.permalink_public)[0].outerHTML;var r;r=TS.boot_data.feature_external_files?TS.interop.i18n.t('External link to this file <p style="display: inline-block;font-weight: 400"> (shareable with anyone) </p>',"files")():TS.interop.i18n.t("Public link to this file","files")();TS.generic_dialog.start({title:r,body:o,show_cancel_button:false,show_close_button:true,show_secondary_go_button:true,secondary_go_button_class:"btn_outline",secondary_go_button_text:TS.interop.i18n.t("Revoke","files")(),show_go_button:true,go_button_text:TS.interop.i18n.t("Done","files")(),esc_for_ok:true,onSecondaryGo:function e(){TS.ui.file_share.fileRevokePublicLink(t.id)},onGo:function e(){TS.generic_dialog.cancel()},onShow:function e(){TS.generic_dialog.div.on("shown",function e(){TS.generic_dialog.div.off("shown",e);$("#public_url").select().focus().on("keydown",function(e){e.which==TS.utility.keymap.esc&&TS.generic_dialog.cancel()})})}})},fileRevokePublicLink:function e(n){var t=TS.files.getFileById(n);if(!t)return false;var o;var r;if(TS.boot_data.feature_external_files){o=TS.interop.i18n.t("Revoke external file link","files")();r='<p class="no_bottom_margin">'+TS.interop.i18n.t("This will disable the external link for this file. Any previously shared links will stop working.<br /><br />Are you sure you want to revoke this link?","files")()+"</p>"}else{o=TS.interop.i18n.t("Revoke public file link","files")();r='<p class="no_bottom_margin">'+TS.interop.i18n.t("This will disable the Public Link for this file. This will cause any previously shared links to stop working.<br /><br />Are you sure you want to revoke this public link?","files")()+"</p>"}TS.generic_dialog.start({title:o,body:r,go_button_text:TS.interop.i18n.t("Revoke it","files")(),go_button_class:"btn_warning",onGo:function e(){TS.files.upsertAndSignal({id:t.id,public_url_shared:false},"revokePublicLink");TS.interop.api.callExpedited("files.revokePublicURL",{file:t.id})}})},test:function e(){var e={};Object.defineProperty(e,"_author",{get:function e(){return t},set:function e(n){t=n}});Object.defineProperty(e,"_populateDisabledInputMsg",{get:function e(){return l},set:function e(n){l=n}});Object.defineProperty(e,"_haveAllMembersForModelOb",{get:function e(){return o},set:function e(n){o=n}});return e}});var e={};var n=false;var t=false;var o=function e(n){if(n.is_channel&&!n.is_group)return false;var t=n.members||[n.user];var o=_.map(TS.model.members,"id");return!_.difference(t,o).length};var r=function e(n){$("#select_share_channels .lfs_input_container").removeClass("error");if(n.model_ob.create_channel){$("#select_share_channels_note").removeClass("hidden");$("#select_share_channels .lfs_value .lfs_item").addClass("new_channel_item");$(".modal .dialog_go").text(TS.interop.i18n.t("Next","files")());TS.metrics.count("share_picker_create_clicked");return}$("#select_share_channels .lfs_value .lfs_item").removeClass("new_channel_item");$(".modal .dialog_go").text(TS.interop.i18n.t("Share","files")());var o;o=n.model_ob.id;if(!o)return;$("#share_model_ob_id").val(o);$("#select_share_channel_warning, #select_share_channels_join_note").addClass("hidden");var r=n.model_ob||{};TS.interop.utility.looksLikeMemberId(r.id)&&(r=TS.redux.channels.getImByMemberId(r.id)||r);TS.ui.share_message_dialog.maybeToggleSharedChannelsWarning(t,r);l(r);var a=TS.interop.rules.channels.isExternallySharedChannel(r)||t&&TS.interop.members.isExternal(t);if(a){$('label[for="file_comment_textarea"]').addClass("subtle_silver");TS.utility.contenteditable.disable($("#file_sharing_div #file_comment_textarea"));$("#select_share_at_channel_list").addClass("subtle_silver")}else{$('label[for="file_comment_textarea"]').removeClass("subtle_silver");TS.utility.contenteditable.enable($("#file_sharing_div #file_comment_textarea"));$("#select_share_at_channel_list").removeClass("subtle_silver")}if(TS.interop.rules.channels.isExternallySharedChannel(r)&&!TS.interop.rules.channels.isPendingExternallySharedChannel(r)&&r.shared_team_ids&&r.shared_team_ids.length){$("#select_share_channel_warning").removeClass("hidden");var i=TS.interop.i18n.safeString(TS.interop.i18n.listify(_.map(r.shared_team_ids,TS.teams.getTeamNameById)).join(""));$("#select_share_channel_warning_text").html(TS.interop.i18n.t("<strong>This is a shared channel.</strong> Messages and files sent here will be seen by members of <strong>{shared_teams_list}</strong>.","shared_channels")({shared_teams_list:i}))}if(r.is_im||r.is_mpim)$("#share_context_label").text(TS.interop.i18n.t("Share with","files")());else{$("#share_context_label").text(TS.interop.i18n.t("Share in","files")());r.is_channel&&!r.is_member&&$("#select_share_channels_join_note").removeClass("hidden")}$("#share_cb").prop("checked",true);if(!a){TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()}};var a=function e(n){return TS.ui.file_share.promiseToGetFileShareSelectOptions(n).then(function(e){$("#select_share_channels .lfs_list_container").removeClass("new_channel_container");if(0===e.length){var t=TS.utility.channels.getPermissibleChannelName(n);if(t){e.push({lfs_group:true,label:n,create_channel:true,children:[{lfs_id:"c."+t,model_ob:{create_channel:true,name:t}}]});$("#select_share_channels .lfs_list_container").addClass("new_channel_container");TS.metrics.count("share_picker_create_shown")}}return e})};var i=function e(){if(TS.client&&TS.client.activeChannelIsHidden()){if(n)return n.id}else{var t=TS.shared.legacyGetActiveModelOb();if(t)return t.id}if(TS.web&&TS.web.space)return TS.web.space.getOriginChannel();return null};var s=function e(n,t){return TS.ui.file_share.preselected.length?TS.ui.file_share.preselected.indexOf(n)>-1:n===t};var l=function e(n){if(!_.isObject(n))return;TS.interop.utility.looksLikeMemberId(n.id)&&(n=TS.redux.channels.getImByMemberId(n.id)||n);var o="";o=t&&TS.interop.members.isExternal(t)?TS.interop.i18n.t("Only members of {team_name} can comment on this file.","shared_channels")({team_name:TS.teams.getTeamNameByMember(t)}):n.is_channel||n.is_group?TS.interop.i18n.t("Comments are disabled in shared channels.","shared_channels")():TS.interop.i18n.t("Comments are disabled when sharing with another\xa0workspace.","shared_channels")();$("#file_comment_textarea").attr("data-disabled-text",o)};var c=function e(n){return _.isString(n)?TS.files.getFileById(n):n}})()},3693:function(e,n,t){"use strict";t.r(n);var o=t(40);var r=t.n(o);(function(){var e=function e(n,t){var o=_.get(window,"TS.model.team.id")||_.get(window,"TS.boot_data.team_id","none");var r=_.get(window,"TS.model.user.id")||_.get(window,"TS.boot_data.user_id","none");var a={description:t,error_json:JSON.stringify(n),team:o,user:r,version:TS.boot_data.version_ts};$.post(TS.boot_data.beacon_error_url,a)};var n=function e(n,t,o){if(!window.console||!console[n])return;var r=TS.qs_args.clean_log;var i=null!==t;o=Array.prototype.slice.call(o);if(i){if(!TS.console.shouldLog(t))return;o.splice(0,1)}o=_.map(o,function(e){return a(e)});var s=true;var l=o.length;while(s&&l){l-=1;s="string"===typeof o[l]}if(r&&"error"!==n&&(t!==parseInt(TS.qs_args.pri,10)||!i))return;if(s){var c=TS.makeLogDate();i&&!r&&(c+="[** "+t+" **]");o.unshift(c);console[n](o.join(" "))}else console[n].apply(console,o)};window.TS||(window.TS={});TS.console={onStart:function e(){TS.console.setAppropriatePri(true);TS.console.watchForErrors()},count:function e(){n("count",null,arguments)},dir:function e(n,t,o){if(!window.console||!console.dir)return;if(n&&!TS.shouldLog(n))return;o=o||"";t=a(t);var r=parseInt(TS.qs_args.dir_json,10);if(r){var i=1==r?"2000":r;try{var s=JSON.stringify(t,null,"  ");if(s.length>i)throw new Error("too long");console.info(TS.makeLogDate()+"[** "+n+" **] "+o+" "+s);return}catch(e){if("too long"!==e){console.info(TS.makeLogDate()+"[** "+n+" **] "+o+" "+t);return}}}try{var l=_.cloneDeep(t);console.info(TS.makeLogDate()+"[** "+n+" **] "+o+" \ud83d\udc47");console.dir(l)}catch(e){TS.warn("could not dir ob:"+t+" err:"+e)}},error:function e(){n("error",null,arguments)},group:function e(){n("group",null,arguments)},groupCollapsed:function e(){n("groupCollapsed",null,arguments)},groupEnd:function e(){n("groupEnd",null,arguments)},maybeError:function e(t){n("error",t,arguments)},getStackTrace:function e(){var n="dev"===_.get(TS,"boot_data.version_ts")||_.get(TS,"qs_args.js_path");var t=(new Error).stack;if(n){var o=new Error;var r=Promise.resolve();if(_.isFunction(r._attachExtraTrace)){r._attachExtraTrace(o);t=o.stack||"";var a=t.split("\n");if(a.length&&a.indexOf("From previous event:")>=0){var i=a.indexOf("From previous event:")+1;t=[a[0]].concat(a.slice(i)).join("\n")}}}var s;s=t?t.split&&t.split("\n")||["[could not parse stack]",t]:["no stacktrace available"];s=_.filter(s,function(e){if(0===e.indexOf("Error"))return false;return e.trim().length&&-1===e.indexOf("StackTrace")});s=_.map(s,function(e){return e.trim()});var l=s.join("\n");return l},info:function e(){n("info",null,arguments)},log:function e(t){n("log",t,arguments)},logError:function n(t,o,r,a){var i=t instanceof Error?t:new Error;var s={subtype:r||"none",message:t instanceof Error?t.message||t.description:JSON.stringify(t),fileName:i.fileName||i.sourceURL,lineNumber:i.lineNumber||i.line,stack:i.stack||i.backtrace||i.stacktrace};var l=JSON.stringify(s);e(s,o);!a&&window.console&&console.error&&console.error(TS.makeLogDate()+"logging error: "+l)},logStackTrace:function e(n){var t=_.isUndefined(n)?"":n+"\n";TS.console.info(t+"Stacktrace: \u21b4\n",TS.console.getStackTrace())},logStackTraceToBackEnd:function n(t,o,r){if(!o||!t||_.isUndefined(r)){TS.console.warn("Invalid parameters, will not log stack trace");return}var a=TS.console.getStackTrace();var i=_.get(a.split("\n"),"[1]")||"(unknown)";TS.metrics.count(o+"_v"+r);var s={message:t+". Immediate caller: "+i,stack:a};var l=i.match(/\((.+):(\d+:\d+)\)/);if(l&&3==l.length){s.fileName=l[1];s.lineNumber=l[2]}var c=o+"_caller_v"+r;e(s,c)},profile:function e(){n("profile",null,arguments)},profileEnd:function e(){n("profileEnd",null,arguments)},replaceConsoleFunction:function e(t){var o=n;n=t;return o},setAppropriatePri:function e(n){var o="";TS.qs_args.pri&&(o+=TS.qs_args.pri);if(n&&TS.boot_data.client_logs_pri){""!==o&&(o+=",");o+=TS.boot_data.client_logs_pri}if(TS.model&&TS.prefs&&TS.prefs.prefs_loaded&&TS.prefs.getPref("client_logs_pri")){""!==o&&(o+=",");o+=TS.prefs.getPref("client_logs_pri")}""!==o&&(o+=",");o+="0";TS.pri=_.uniq(o.split(",")).join(",");t()},shouldLog:function e(n){var t=String(TS.pri).split(",");if(-1!==t.indexOf("all")||-1!==t.indexOf("*"))return true;if(-1!==t.indexOf(String(n)))return true;return"undefined"!==typeof TS.has_pri[n]},table:function e(){n("table",null,arguments)},time:function e(){n("time",null,arguments)},timeEnd:function e(){n("timeEnd",null,arguments)},timeStamp:function e(){n("timeStamp",null,arguments)},warn:function e(){n("warn",null,arguments)},maybeWarn:function e(t){n("warn",t,arguments)},watchForErrors:function e(){if(!TS.boot_data||!TS.boot_data.feature_beacon_js_errors)return;var n=true;var t=_.throttle(s,1e4);window.addEventListener("error",t,n)},trace:function e(){n("trace",null,arguments)},maybeTrace:function e(t){n("trace",t,arguments)},test:function e(){return{_maybeRedactFields:a,_windowErrorHandler:s}}};var t=function e(){var n=String(TS.pri).split(",");TS.has_pri=_(Object.keys(TS.boot_data.client_logs||{})).filter(function(e){var t=TS.boot_data.client_logs[e];return n.some(function(e){if("*"===e)return true;if(t.numbers.indexOf(parseInt(e,10))>-1)return true;if(t.name&&t.name.indexOf(e)>-1)return true;if(t.owner&&t.owner.indexOf(e)>-1)return true;return false})}).map(function(e){if(parseInt(e,10)>=0)return parseInt(e,10);return e}).keyBy(function(e){return e}).value()};var o={name:1,_name_lc:1,real_name:1,_real_name_lc:1,real_name_normalized:1,_real_name_normalized_lc:1,display_name:1,_display_name_lc:1,display_name_normalized:1,_display_name_normalized_lc:1,first_name:1,_first_name_lc:1,last_name:1,_last_name_lc:1,preferred_name:1,full_name:1,email:1,skype:1,status_text:1,title:1,src:1,text:1,msgs:1};var a=function e(n,t){if(!TS.boot_data||TS.boot_data.feature_tinyspeck||"dev"===TS.boot_data.version_ts)return n;if(!n||!_.isObject(n))return n;t?t+=1:t=1;if(t>=10)return n;var r;r=_.isArray(n)?[]:{};_.each(n,function(n,a){o[a]?r[a]="[redacted "+i(n)+"]":r[a]=e(n,t)});return r};var i=function(e){var n={};return function(t){var o="undefined"===typeof t?"undefined":r()(t);if(null===t)return"null";if(t===e)return"global";if("object"!==o)return o;if(t.nodeType)return"DOM node";var a=n[o={}.toString.call(t)]||(n[o]=o.slice(8,-1).toLowerCase());return a}}(this);var s=function e(){var n=arguments&&arguments[0];var t;var o="";var r;var a=true;if(!n)return;o="";t=n.srcElement||n.target;if(t&&t.nodeName)if("SCRIPT"===t.nodeName)o=(n.type||"error")+" from script at "+t.src+" (failed to load?)";else if("IMG"===t.nodeName){TS.pri&&TS.console&&TS.console.warn&&TS.console.warn("<img> fired error with url = "+(t.src||t.currentSrc||"unkonwn"));return}n.error&&n.error.stack?o+=n.error.stack:n.filename&&(o=" from "+n.filename+(n.lineno?" @ line "+n.lineno+", col "+n.colno:""));r=(n.error&&n.error.stack?"":n.message||"")+" "+o;r&&r.replace&&(r=r.replace(/\s+/g," ").trim());if(!r||!r.length){r=t?"error event from node of "+(t.nodeName||"unknown")+", no message provided?":"error event fired, no relevant message or node found";a=false}r="\ud83d\udc1e "+r;(window.TS&&TS.console&&TS.console.error||window.console.error||function(){})(r);if(window.TS&&TS.console&&a){var i="js_runtime_error";var s=false;TS.console.logError(n.error||n,r,i,s)}t=null;r=null}})();var a=t(24);var i=t.n(a);var s=t(3);var l=t.n(s);(function(){var e=window.TS&&TS.raw_templates;var n=window.TS&&TS.console;var t=0;var o;var r;window.TSM&&window.TSM.interop||console.error("TSM.interop not found, app almost certainly will not boot properly");window.TS={boot_data:{},qs_args:{},pri:0,has_pri:{},console:n,ms:{},interop:window.TSM&&window.TSM.interop,boot:function e(n){TS.interop.debug.exportToGlobalDebugger("teamIds",[n.team_id]);TS.interop.debug.exportToGlobalDebugger("activeTeamId",n.team_id);TS.interop.debug.exportToGlobalDebuggerWithGetter("activeTeam",function(){return window.slackDebug[n.team_id]});C();r=new Promise(function(e){o=e});TS.boot_data=n;TS.qs_args.js_path&&(TS.boot_data.version_ts="local_js");TS.console.onStart();TS.client&&TS.client.setClientLoadWatchdogTimer();TS.model.api_url=TS.boot_data.api_url;TS.model.async_api_url=TS.boot_data.async_api_url;TS.model.api_token=TS.boot_data.api_token;TS.model.webhook_url=TS.boot_data.webhook_url;TS.boot_data.page_needs_enterprise&&(TS.model.enterprise_api_token=TS.boot_data.enterprise_api_token);TS.interop.console.info("BOOT","booted! pri:"+TS.pri+" version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms+" ("+(Date.now()-TS.boot_data.start_ms)+"ms ago)");TS.interop.desktop.hasDeviceStorage()&&TS.interop.environment.isSSB()&&TS.interop.desktop.setItem("shouldLogFirstMeaningfulPaint","true");TS.web&&TS.web.space&&TS.web.space.showFastPreview();TS.redux.onStart();TS.redux.onStart=_.noop;if(TS.incremental_boot.shouldIncrementalBoot()){TS.interop.console.info("BOOT","Starting incremental boot (early)");h=TS.incremental_boot.startIncrementalBoot();if(TS.boot_data.feature_degraded_send){TS.interop.console.info("BOOT","Starting data fetch (early)");T=k()}}TS.interop.clog.instance.setUser(TS.boot_data.user_id).setTeam(TS.boot_data.team_id).setEnterprise(TS.boot_data.enterprise_id).setLocale(TS.interop.i18n&&TS.interop.i18n.locale).addEventListeners().start();TS.boot_data.feature_cdn_download_test&&TS.interop.runCdnDownloadTest();$(document).ready(B)},useReactMessages:function e(){return true},useReactLFS:function e(){return TS.boot_data.feature_react_lfs},useGlobalNav:function e(){return TS.boot_data.feature_global_nav&&"treatment"===TS.interop.experiments.getGroupForUser("global_nav")},registerModule:function e(n,t,o){U(t);if(v)return TS.error('module "'+n+'" must be registered on before dom ready');if(M[n])return TS.error('module "'+n+'" already exists');var r=a(n,t,"module");if(void 0===r){o?TS.error('module "'+n+'" cannot be registered after delay; "'+n.split(".").slice(0,-1).join(".")+'" is not registered'):A[n]=t;return}t._name=n;M[n]=t},registerComponent:function e(n,o){if(v)return TS.error('component "'+n+'" must be registered on before dom ready');if(L[n])return TS.error('component "'+n+'" already exists');"function"===typeof o&&(o=o());if("function"!==typeof o.destroy)return TS.error('component "'+n+'" cannot be registered as it does not have a destroy method');var r=function e(){this._constructor&&this._constructor.apply(this,arguments);if(!this.id){this.id=n+"_auto_guid_"+t;t+=1}this.test&&s()?this.test=void 0:"function"===typeof this.test&&(this.test=this.test());e._add(this.id,this)};var i=a(n,r,"component");if(void 0===i){F[n]=o;return}var l=o.destroy;o.destroy=function(){r._remove(this.id);l.call(this)};r.prototype=Object.create(o);r.instances={};r._name=n;L[n]=r;r._add=function(e,t){L[n].instances[e]&&TS.warn("A "+n+" component with the instance id "+e+"already exists");L[n].instances[e]=t};r._remove=function(e){L[n].instances[e]=null};r.get=function(e){return L[n].instances[e]};r.getAll=function(){return L[n].instances}},makeLogDate:function e(){if(window.TSMakeLogDate)return TSMakeLogDate();return"(TSMakeLogDate not loaded) "},shouldLog:function e(n){return TS.console.shouldLog(n)},replaceConsoleFunction:function e(n){return TS.console.replaceConsoleFunction(n)},log:function e(n){if(TS.shouldLog(n)){var t=H(n,"log");var o=K(n,arguments);TS.interop.console.info(t,[].slice.call(o,0))}},info:function e(){TS.interop.console.info("info",[].slice.call(arguments,0))},maybeWarn:function e(n){TS.console.maybeWarn.apply(this,[].slice.call(arguments,0))},warn:function e(){TS.interop.console.warn([].slice.call(arguments,0))},dir:function e(n,t,o){TS.console.dir.apply(this,[].slice.call(arguments,0))},maybeError:function e(n){TS.console.maybeError.apply(this,[].slice.call(arguments,0))},error:function e(){TS.interop.console.error([].slice.call(arguments,0))},logError:function e(n,t,o,r){TS.console.logError.apply(this,[].slice.call(arguments,0))},getQsArgsForUrl:function e(n){if(!n&&b)return b;b="";for(var t in TS.qs_args){if("export_test"===t)continue;b+="&"+t+"="+encodeURIComponent(TS.qs_args[t])}return b},getOtherAccountsCount:function e(){var n=0;if(!TS.boot_data.other_accounts)return n;n=Object.keys(TS.boot_data.other_accounts).length;return n},refreshTeams:function e(){if(!TS.boot_data)return;if(!TS.model)return;if(!TS.model.team)return;if(!TS.model.user)return;TS.interop.api.call("auth.currentSessions").then(function(e){var n=e.data;TS.boot_data.other_accounts={};for(var t in n.accounts){if(t==TS.model.user.id)continue;TS.boot_data.other_accounts[t]=n.accounts[t]}}).catch(function(e){if(TS.console&&TS.console.warn&&TS.console.error){TS.warn(8675309,"unable to do anything with refreshTeams rsp");TS.error(8675309,e)}})},reload:function e(n,t,o){if(n){TS.info("TS.reload called: "+n);TS.generic_dialog.start({title:TS.interop.i18n.t("Reloading!","ts")(),body:n,show_cancel_button:false,esc_for_ok:true,onGo:function e(){TS.reload()}});return}t&&(t=JSON.stringify(t));TS.info("TS.reload() called: "+(t||"no reason specified"));TS.console&&TS.console.logStackTrace();window.location.reload(o)},reloadIfLoggedInAndShouldReload:function e(n){if(TS.model.ms_logged_in_once&&n.should_reload){TS.reload(null,"rtm.shouldReload said so");return true}return false},reloadIfVersionsChanged:function e(n){if(TS.model.ms_logged_in_once&&n.min_version_ts&&"dev"!==TS.boot_data.version_ts&&parseInt(TS.boot_data.version_ts,10)<parseInt(n.min_version_ts,10)){TS.reload(null,"parseInt(TS.boot_data.version_ts) < parseInt(data.min_version_ts)");return true}if(TS.model.ms_logged_in_once&&n.cache_version&&n.cache_version!=TS.storage.msgs_version){TS.reload(null,"data.cache_version "+n.cache_version+" != TS.storage.msgs_version "+TS.storage.msgs_version);return true}return false},isPartiallyBooted:function e(){return!!(TS._incremental_boot||TS._did_incremental_boot&&!TS._did_full_boot)},ensureFullyBooted:function e(){return r},maybeShowRateLimitedDialog:function e(){V()},test:function e(){var e={_registerDelayedComponentsAndModules:N,_deleteModule:function e(n){delete TS[n];delete M[n]},_deleteComponent:function e(n){delete TS[n];delete L[n]}};return e}};delete window.TSM;var a=function e(n,t,o){var r=n;var a=TS;var i=r.split(".");var s=i.length-1;if(s>=3)TS.error(o+' "'+r+'" cannot be registered, as we only support a depth of two sub modules right now');else if(s){r=i[s];var l=0;for(l;l<s;l+=1){i[l]||TS.error(o+' "'+n+'" cannot be registered because of a bad name');a=a[i[l]];if(void 0===a)return a}}void 0!==a[r]?TS.error(o+' "'+n+'" cannot be registered; "'+r+'" already exists on "'+(a._name||"TS")+'"'):a[r]=t;return a};if(e){TS.raw_templates=e;e=null}var s=function e(){return!("undefined"!==typeof window.jasmine||"dev"===TS.boot_data.version_ts&&TS.qs_args.export_test)};var c=function e(){var n=u();T=n;if(!h){TS.info("Starting non-incremental boot");return n}var t=h;return t.then(function(e){e.data.emoji_cache_ts=_.get(TS.storage.fetchCustomEmoji(),"cache_ts");e.data.apps_cache_ts=_.get(TS.storage.fetchApps(),"cache_ts");e.data.commands_cache_ts=_.get(TS.storage.fetchCmds(),"cache_ts");e.data.translations_cache_ts=_.get(TS.storage.fetchStaticTranslations(),"cache_ts");return e}).catch(function(){TS.info("Recovering from incremental boot error");T=void 0;return n}).finally(function(){h=void 0})};var u=function e(){if(TS.qs_args.no_rtm_start)return new Promise(function(n,t){TS.resumeRTMStart=function(){delete TS.resumeRTMStart;delete TS.qs_args.no_rtm_start;e().then(function(e){n(e)}).catch(t)}});if(TS.boot_data.rtm_start_response&&!TS.qs_args.no_rtm_start_response){var n=Promise.resolve({ok:true,args:TS.boot_data.rtm_start_response.args,data:TS.boot_data.rtm_start_response.data});delete TS.boot_data.rtm_start_response;return n}return j().then(function(e){TS.has_pri[q]&&TS.log(q,"Flannel: got rtm.start response \ud83d\udc95");return{ok:true,args:{},data:e}})};var d=function e(n){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Got rtm.start login data");TS.model.emoji_cache_ts=n.data.emoji_cache_ts;TS.model.apps_cache_ts=n.data.apps_cache_ts;TS.model.commands_cache_ts=n.data.commands_cache_ts;TS.model.static_translations_cache_ts=n.data.translations_cache_ts;if(!n.data.self){TS.error("No self?");return}if(!n.data.team){TS.error("No team?");return}TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up model");return D(n.data,n.args).then(function(){TS.boot_data.feature_ekm_message_revocation&&f(n.data);TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Model did set up; setting up apps");TS.apps.setUp();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up commands");TS.cmd_handlers.setUpCmds();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up static translations");TS.i18n.setUpStaticTranslations();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up UI");m();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Finding initial channel");TS.client&&TS.client.calculateInitialCid();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up emoji and shared channels");if(TS.model.user.is_restricted&&!TS.boot_data.feature_scg_api_filters){var e=_([n.data.mpims,n.data.ims]).flatten().map(function(e){return e.members||[e.user]}).flatten().concat(TS.model.guest_accessible_user_ids,TS.model.user.id).compact().uniq().value();var t=true;TS.members.legacySetAccessibleUserIds(e,t);TS.members.legacyMaybeFetchAccessibleUserIds()}return TS.emoji.bootEmoji().timeout(500).catch(Promise.TimeoutError,function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Fetching emoji took too long; continuing without waiting for it")}).catch(function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up emoji failed, trying to move forward anyway...")})}).then(function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Nearly there! Finalizing...");TS.model.ms_logged_in_once||p(n.data);TS.client&&TS.client.onEveryLoginMS(n.data);TS.web&&TS.web.onEveryLoginMS(n.data);S();J(n.data);var e;e=TS._did_incremental_boot?TS.model.ms_logged_in_once:!TS.model.ms_logged_in_once;if(e&&o){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Divine clementine, we are finalizing a full boot!");o();o=null;TS.interop.desktop.isDesktop&&TS.redux.dispatch(TS.interop.desktop.onWebappBooted());I&&TS.interop.console.info("BOOT","Finished first boot "+Math.ceil(performance.now()-I)+" ms after DOM ready")}TS.model.ms_logged_in_once=true;TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Holy guacamole, we\u2019re all done!");TS.log(123,"User id: "+_.get(TS.boot_data,"user_id")+", team id: "+_.get(TS.model,"team.id"));TS.boot_data.feature_failover_proxy_check&&TS.interop.failoverProxyCheck()}).catch(function(e){TS.error("_setUpModel failed with err: "+(e?e.message:"no err provided"));TS.dir(e);TS.info(e.stack);TS._last_boot_error=e})};var f=function e(n){if(parseInt(TS.storage.fetchLastEKMChangeTimestamp()||"0",10)<parseInt(n.ekm_clear_cache_ts||"0",10)){if(TS.interop.desktop.isDesktop){TS.interop.console.info("BOOT","EKM clear cache event occurred; clearing file cache");TS.interop.desktop.clearCache()}TS.interop.console.info("BOOT","Updating last_ekm_change_ts in storage to "+n.ekm_clear_cache_ts);TS.storage.storeLastEKMChangeTimestamp(n.ekm_clear_cache_ts)}};var m=function e(){TS.ui.setThemeClasses();TS.client&&TS.client.updateTeamIcon()};var p=function e(n){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_finalizeFirstBoot");if(TS.model.ms_logged_in_once){TS.warn("_finalizeFirstBoot called, but we have already done this before. This is a progamming error.");return}if(TS.client){TS.client.onFirstLoginMS(n);if(TS.isPartiallyBooted()){g(T);TS.boot_data.feature_degraded_send||(T=void 0)}else TS.incremental_boot.afterFullBoot();TS.has_pri["1996"]=true}TS.web&&TS.web.onFirstLoginMS(n);TS.boot_data.feature_degraded_send&&(T=void 0)};var g=function e(n){TS.interop.console.info("BOOT","Finalizing incremental boot");TS.incremental_boot.beforeFullBoot();n.then(function(e){d(e);TS.incremental_boot.afterFullBoot();TS.interop.console.info("BOOT","Completed incremental boot")}).catch(function(e){TS.error("Tried to finalize incremental boot, but rtm.start failed. Will recover when we reconnect.");throw e})};var S=function e(){if(TS.isPartiallyBooted()){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS not connecting to MS until we complete incremental boot");return}if(!TS.interop.Flannel.useSocket()){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS will not connect to MS");return}TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS wants to connect to MS");if(TS.redux.socket.isProvisionallyConnected()){TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS will finalize SocketManager");try{TS.interop.SocketManager.finalizeProvisionalConnection();TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS did finalize SocketManager")}catch(e){TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS failed to finalize SocketManager");var n=true;TS.console.logError(e,"sm_finalize_failed_2",void 0,n);TS.interop.SocketManager.disconnect()}}else{TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS wanted to finalize SocketManager but it had no provisional connection");if(TS.redux.socket.hasNeverConnected()){"calls"===TS.boot_data.app?TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS: opening our SocketManager connection now"):TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS: we have never had a connection. This should not happen!");j().then(function(e){d({ok:true,args:{},data:e})})}else if(!TS.redux.socket.wasPreviouslyConnected()){TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS: we had a connection but it is gone for some reason; wait for it to come back");TS.redux.socket.provisionallyConnectedSig.addOnce(function(){return e()})}}TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS did connect to MS")};var h;var T;TS.qs_args=function(){var e=location.search.substring(1);var n={};var t;t=e.split("&");for(var o=0;o<t.length;o+=1){var r=t[o].indexOf("=");if(-1!=r){var a=t[o].substring(0,r);var i=t[o].substring(r+1);n[a]=unescape(i)}else t[o].length&&(n[t[o]]="")}return n}();TS.pri=TS.qs_args.pri?TS.qs_args.pri+",0":TS.pri;_.each(TS.pri&&TS.pri.split(","),function(e){e&&(TS.has_pri[e]=true)});var v=false;var b;var w=function e(){TS.redux.socket.connectedSig.addOnce(function(){TS.boot_data.feature_degraded_send?TS.redux.socket.provisionallyConnectedSig.add(function(){TS.info("Successfully fetched start data; processing it");k().then(function(e){return d({ok:true,args:{},data:e})})}):TS.redux.socket.provisionallyConnectedSig.add(function(e){y(e).then(function(e){TS.info("Successfully hydrated start data from Socket Manager; processing it");d({ok:true,args:{},data:e})})})})};var y=function e(n){return n.then(function(e){TS.info("Got start data from Socket Manager; hydrating it");return TS.redux.dispatch(TS.interop.boot.data.hydrateStartData({startData:e}))})};var k=function e(){return T||TS.redux.dispatch(TS.interop.boot.data.getStartData())};var j=function e(){if(!TS.redux.socket.hasNeverConnected()){var n=new Error("_connectAndFetchStartDataWithSocketManager can only be called if Socket Manager has never connected");TS.console.logError(n,"_connectAndFetchStartDataWithSocketManager called too many times");return Promise.reject(n)}if(TS.boot_data.feature_degraded_send)return k().tap(x);var t=new Promise(function(e){function n(t){y(t).then(function(t){TS.redux.socket.connectedSig.addOnce(function(){TS.redux.socket.provisionallyConnectedSig.remove(n)});e(t)}).catch(function(e){TS.warn("Unable to get start data from socket");TS.logError(e)})}TS.redux.socket.provisionallyConnectedSig.add(n)});x();return t};var x=function e(){TS.has_pri["1996"]=true;TS.interop.Eventlog.createInstanceForTeam(TS.boot_data.team_id);TS.interop.SocketManager.start(TS.boot_data.api_token);if(TS.qs_args.ws_flakiness)try{var n=parseFloat(TS.qs_args.ws_flakiness);if(n>0){TS.interop.SocketManager.debugSetSocketConnectFlakiness(n);TS.interop.SocketManager.debugSetSocketSendFlakiness(n);if(1===n){TS.interop.SocketManager.disconnect();TS.redux.socket.provisionallyConnectedSig.add(TS.interop.SocketManager.disconnect);return}setInterval(function(){TS.redux.socket.isConnected()&&TS.interop.SocketManager.disconnect()},9e4)}}catch(e){}};var O=function e(n){TS.interop.Flannel.useSocket()&&w();z();v=true;TS.model.is_our_app&&W();TS.ui.setUpWindowUnloadHandlers();"client"===TS.boot_data.app?TS.client.gogogo():"web"!==TS.boot_data.app&&"space"!==TS.boot_data.app&&"calls"!==TS.boot_data.app||TS.web.gogogo();"client"!==TS.boot_data.app&&"space"!==TS.boot_data.app&&"calls"!==TS.boot_data.app||TS.interop.activity_session.listenForUserEvents();if(TS.boot_data.no_login){TS.info("running without a user");TS.web&&TS.web.no_login_complete_sig.dispatch()}else n?d(n):TS.error("_initialDataFetchesComplete expected to receive rtm.start data; we cannot continue.")};var E=function e(){if(!window.sessionStorage)return;try{var n=TS.client?"session_load_count_client":"session_load_count_web";var t=parseInt(sessionStorage.getItem(n)||0,10)+1;sessionStorage.setItem(n,t);TS.log(123,n+": "+t);TS.metrics.store(n,t,{is_count:true})}catch(e){TS.warn("could not log session load count: "+e)}};var C=function e(){window.devtoolsFormatters=window.devtoolsFormatters||[];window.devtoolsFormatters.push({header:function e(n){if(!n||!n._is_interop_channel_object||!window._)return null;var t=_.omitBy(_.assign({},n),_.isNil);return["object",{object:t}]},hasBody:function e(){return false}})};var M={};var A={};var L={};var F={};var I;var B=function e(){I=performance.now();TS.log(123,"_onDOMReady");E();if(window.desktop&&desktop.downloads){TS.model.supports_downloads=true;TS.model.flex_names.push("downloads")}TS.client||TS.info("no TS.client on page:"+document.location.href);soundManager.setup({debugMode:false});TS.storage.onStart();N();TS.redux.members.onStart();TS.redux.members.onStart=_.noop;TS.interop.setTeamIdForToken(TS.boot_data.api_token,TS.boot_data.team_id);if(TS.interop&&TS.interop.console&&TS.interop.console.setRedactionEnabled){var n=!TS.boot_data.feature_tinyspeck;TS.interop.console.setRedactionEnabled(n)}var t=TS.boot_data.no_login?Promise.resolve():c();var o=[P(),t];TS.boot_data.page_needs_enterprise&&!TS.boot_data.no_login&&o.push(TS.redux.enterprise.getEnterpriseOrgInfo());Promise.all(o).then(function(){t.then(O);return null})};var P=function e(){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length>0)return Promise.resolve();var n;n=TS.boot_data.hbs_templates_version&&"dev"!==TS.boot_data.version_ts?TS.boot_data.hbs_templates_version:"dev"===TS.boot_data.version_ts?Date.now():TS.boot_data.version_ts;var t="/templates.php?cb="+n+TS.getQsArgsForUrl();TS.boot_data.template_groups&&(t+="&template_groups="+TS.boot_data.template_groups);TS.boot_data.template_exclude_feature_flagged&&(t+="&template_exclude_feature_flagged=1");if(/&locale=[a-zA-Z-]/.test(t)){t=t.replace(/\?locale=[a-zA-Z-]*&/,"?").replace(/[?|&]locale=[a-zA-Z-]*/,"");t=t.replace(/&locale=[a-zA-Z-]/,"")}TS.interop.i18n.locale&&TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(t+="&locale="+TS.interop.i18n.locale);var o=0;function r(){o+=1;return new Promise(function(e){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length>0){e();return}TS.utility.getCachedScript(t).done(function(){if(0==Object.keys(TS.raw_templates).length){TS.error(t+" returned no templates D:");return}e()}).fail(function(e,n,a){var i=Math.min(1e3*o,1e4);TS.warn("loading "+t+" failed (textStatus:"+n+" errorThrown:"+a+" attempts:"+o+"), trying again in "+i+"ms");setTimeout(r,i)})})}return r()};var N=function e(){_.sortBy(Object.keys(A),"length").forEach(function(e){TS.registerModule(e,A[e],true)});_.sortBy(Object.keys(F),"length").forEach(function(e){TS.registerComponent(e,F[e],true)})};var z=function e(){TS.log(Date.now()-TS.boot_data.start_ms+"ms from first html to calling onStarts()");if("client"===TS.boot_data.app){TS.client.onStart();TS.client.onStart=_.noop}else if("web"===TS.boot_data.app||"space"===TS.boot_data.app||"calls"===TS.boot_data.app){TS.web.onStart();TS.web.onStart=_.noop}else{if("test"===TS.boot_data.app)return;if("api"!==TS.boot_data.app&&"oauth"!==TS.boot_data.app){TS.error("WTF app? "+TS.boot_data.app);return}}var n;var t=!TS.qs_args.keep_onstart;try{_.forOwn(M,function(e){if(!e.onStart)return;n=e._name;e.onStart();t&&(e.onStart=_.noop)})}catch(e){TS.error("TS."+n+".onStart encountered an error:");TS.logError(e);window.TSBeacon&&window.TSBeacon("call_onstarts_error",1);throw e}t&&(z=_.noop)};var D=function e(n,t){return new Promise(function(e,o){var r=!TS.model.ms_logged_in_once;n.team.activity=[];n.team.url=n.url;if(n.team.prefs){TS.redux.prefs.setTeamPrefs(n.team.prefs);delete n.team.prefs}TS.redux.teams.upsertTeam(n.team);TS.members.legacyUpsertAndSignal(l()({},n.self,{is_self:true}));TS.boot_data.page_needs_enterprise&&void 0!==n.can_manage_shared_channels&&TS.prefs.setTeamPrefLocal("can_user_manage_shared_channels",n.can_manage_shared_channels);TS.model.last_team_name||(TS.model.last_team_name=TS.model.team.name);if(r){TS.model.read_only_channels=[];if(TS.boot_data.feature_default_shared_channels){TS.model.thread_only_channels=[];TS.model.non_threadable_channels=[]}}else{var a=TS._did_incremental_boot&&!TS._did_full_boot;a||TS.refreshTeams()}TS.prefs.setPrefs(n.prefs||n.self.prefs);n.self.prefs&&delete n.self.prefs;var s;var c;var u;var d=["args.cache_ts:"+t.cache_ts];var f=_.clone(t);f.token&&(f.token="REDACTED");try{d.push("api args: "+JSON.stringify(f))}catch(e){d.push("api args: "+f)}TS.members.legacyStartBatchUpsert();var m=n.users||[];var p=n.bots||[];var g={};if(!TS._did_incremental_boot||TS._incremental_boot||TS._did_full_boot)for(s=0;s<m.length;s+=1)g[m[s].id]=true;else;for(s=0;s<m.length;s+=1){c=TS.members.legacyUpsertAndSignal(m[s]);u=c.member;TS.has_pri[R]&&TS.log(R,"upsert from DATA: "+u.id+" "+c.status)}var S={};for(s=0;s<p.length;s+=1)S[p[s].id]=true;TS.redux.bots.bulkUpsertBots(p);d.push("members from updated_users in rtm.start:"+m.length+" (slackbot will always be here)");d.push("bots from updated_bots in rtm.start:"+p.length);m.length<TS.model.members.length/20&&(TS.model.did_we_load_with_user_cache=true);var h;TS.qs_args.debug_slackbot&&(h=true);h&&TS.info("debug_slackbot: _setUpModel(): data_user_list, data_bot_list",m,p);S=null;g=null;TS.log(123,d.join("\n"));if(!TS.model.user){TS.error("No TS.model.user - Expected user with id: "+_.get(n,"self.id","#"));TS.log(d.join("\n"));o(Error("No TS.model.user"));return}TS.members.legacyFinishBatchUpsert();TS.prefs.setHighlightWords(TS.prefs.getPref("highlight_words"));if(n.subteams)if(TS.boot_data.feature_lazy_user_groups){TS.interop.userGroups.clearAllUserGroupMembership();TS.interop.userGroups.bulkAddUserGroupMembership({userGroups:[].concat(i()(n.subteams.self)),isMember:true})}else{TS.user_groups.legacyStartBatchUpsert();TS.interop.userGroups.upsertUserGroups(n.subteams.all);TS.user_groups.legacyFinishBatchUpsert();n.subteams.self.forEach(function(e){TS.interop.userGroups.upsertSelfUserGroup(e)})}h&&TS.info("debug_slackbot: _setUpModel(): data.ims",n.ims);n.read_only_channels&&(TS.model.read_only_channels=n.read_only_channels);TS.boot_data.feature_default_shared_channels&&n.non_threadable_channels&&(TS.model.non_threadable_channels=n.non_threadable_channels);TS.boot_data.feature_default_shared_channels&&n.thread_only_channels&&(TS.model.thread_only_channels=n.thread_only_channels);TS.model.initial_msgs_cnt=42;if(TS.qs_args.api_count){var T=parseInt(TS.qs_args.api_count,10)||TS.model.initial_msgs_cnt;TS.model.initial_msgs_cnt=Math.min(TS.model.initial_msgs_cnt,T)}var v=TS.model.hard_msg_limit;TS.model.subsequent_msgs_cnt=Math.min(v,2*TS.model.initial_msgs_cnt);TS.model.special_initial_msgs_cnt=Math.min(v,2*TS.model.initial_msgs_cnt);TS.log(123,"initial_msgs_cnt:"+TS.model.initial_msgs_cnt+" subsequent_msgs_cnt:"+TS.model.subsequent_msgs_cnt+" special_initial_msgs_cnt:"+TS.model.special_initial_msgs_cnt);var b=function e(){var t=1==TS.qs_args.just_general;TS.utility.msgs.startBatchUnreadCalc();TS.metrics.mark("upsert_channels_start");var o=_.map(n.channels,function(e){if(t&&!e.is_general)return;var o=false;var r=false;var a=false;n.read_only_channels&&(o=n.read_only_channels.indexOf(e.id)>-1);TS.boot_data.feature_default_shared_channels&&n.thread_only_channels&&(r=n.thread_only_channels.indexOf(e.id)>-1);TS.boot_data.feature_default_shared_channels&&n.non_threadable_channels&&(a=n.non_threadable_channels.indexOf(e.id)>-1);return l()({},e,{is_read_only:o,is_thread_only:r,is_non_threadable:a})});TS.metrics.measureAndClear("upsert_channels","upsert_channels_start");h&&TS.info("debug_slackbot: completeModelObSetup(): data.ims",n.ims);var r=_.map(n.ims,function(e){if(t&&"USLACKBOT"!==e.user)return;return e});TS.metrics.mark("upsert_groups_start");var a=_.map(n.groups,function(e){if(t)return;var o=false;var r=false;var a=false;n.read_only_channels&&(o=n.read_only_channels.indexOf(e.id)>-1);TS.boot_data.feature_default_shared_channels&&n.thread_only_channels&&(r=n.thread_only_channels.indexOf(e.id)>-1);TS.boot_data.feature_default_shared_channels&&n.non_threadable_channels&&(a=n.non_threadable_channels.indexOf(e.id)>-1);return l()({},e,{is_read_only:o,is_thread_only:r,is_non_threadable:a})});TS.metrics.measureAndClear("upsert_groups","upsert_groups_start");if(n.mpims){h&&TS.info("debug_slackbot: completeModelObSetup(): data.mpims",n.mpims);var i=_.map(n.mpims,function(e){if(t)return;return e})}var s=_.compact(o.concat(r).concat(a).concat(i));TS.redux.channels.bulkAddEntities(s);if(!TS.isPartiallyBooted()&&!TS.boot_data.feature_degraded_send){var c=false;_.differenceBy(TS.interop.redux.models.channels.getUnarchivedPublicAndPrivateChannelsUserIsIn(TS.redux.getState()),n.groups,n.channels,"id").forEach(function(e){TS.interop.rules.channels.isPrivateChannel(e)?TS.redux.dispatch(TS.interop.redux.models.channels.removeChannels({ids:[e.id]})):TS.redux.dispatch(TS.interop.redux.models.channels.leaveChannel(e));TS.channels.left_sig.dispatch(e);c=true});c&&TS.members.invalidateMembersUserCanSeeArrayCaches()}TS.interop&&TS.interop.ChannelSidebar&&TS.interop.ChannelSidebar.ensureRowInView();TS.utility.msgs.finishBatchUnreadCalc();TS.model.user.is_restricted&&!TS._incremental_boot&&TS._did_incremental_boot&&TS.members.invalidateMembersUserCanSeeArrayCaches();if(h){var u=TS.redux.channels.getImByMemberId("USLACKBOT");var d=TS.interop.members.getMemberById("USLACKBOT");TS.info("debug_slackbot: "+(TS._incremental_boot?"incremental boot":"non-incremental boot")+"\nTS.redux.channels.getImByMemberId('USLACKBOT') => "+(u?"OK \ud83c\udf89":"NOT FOUND \ud83d\udc7b")+"\nTS.interop.members.getMemberById('USLACKBOT') => "+(d?"OK \ud83c\udf89":"NOT FOUND \ud83d\udc7b"));u&&TS.info("debug_slackbot: slackbot_im",u.toJSON&&u.toJSON()||u);d&&TS.info("debug_slackbot: slackbot_member",d.toJSON&&d.toJSON()||d);TS._incremental_boot||u||TS.warn("debug_slackbot: TS.redux.channels.getImByMemberId(`USLACKBOT`): No IM found?")}};if(n.dnd){n.dnd.dnd_enabled?TS.redux.dnd.updateDndScheduleForMember(n.self.id,n.dnd.next_dnd_start_ts,n.dnd.next_dnd_end_ts):TS.redux.dnd.updateDndScheduleForMember(n.self.id,null,null);(n.dnd.snooze_enabled||n.dnd.snooze_endtime)&&TS.redux.dnd.updateSnoozeScheduleForCurrentMember(n.dnd.snooze_enabled,n.dnd.snooze_endtime)}b();TS.redux.dispatch(TS.interop.redux.models.paidFeatures.setPaidFeatures(n.paid_features||[]));e()})};var U=function e(n){if(n.test&&!n.__esModule&&s())delete n.test;else if("function"===typeof n.test){var t=n.test;Object.defineProperty(n,"test",{get:t})}};U(TS);var W=function e(){var n=false;var t=function e(){TS.info("sleep event!");n=true;TS.web&&TS.web.space&&TS.ds.sleep()};var o=function e(){if(!n)return;n=false;TS.info("wake event! version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms);TS.web&&TS.web.space&&TS.ds.wake()};window.addEventListener("sleep",t,false);window.addEventListener("wake",o,false)};var q=1989;var R=481;var G;var V=function e(){if(TS.boot_data.feature_degraded_send)return;if(G)return;G=true;TS.metrics.count("rate_limit_dialog_shown");var n=TS.interop.i18n.t("Bear with us","ts")();var t=TS.interop.i18n.t("Dismiss","ts")();var o=TS.interop.i18n.t("Lots of your teammates are connecting to Slack right now, so it\u2019s taking longer than usual. We\u2019re really sorry about this, and we\u2019ll have you online soon.","ts")();var r=TS.generic_dialog.alert(o,n,t);var a=function e(){r.isPending()&&TS.generic_dialog.cancel();G=false};TS.redux.socket.connectedSig.addOnce(a)};var H=function e(n,t){var o=t;n&&_.isNumber(n)?o=""+n:"log"===t&&(o="info");return o};var K=function e(n,t){var o=Array.prototype.slice.call(t);n&&_.isNumber(n)&&o.shift();return o};var J=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=n.channels,o=n.ims,r=n.mpims,a=n.groups,i=n.self,s=n.team;var l=_([t,o,r,a]).flatten().map("id").value();var c=[i.id];var u=[s.id];TS.interop.channels.markObjectsAsFresh(l);TS.interop.members.markObjectsAsFresh(c);TS.interop.teams.markObjectsAsFresh(u)}})();var c=t(3077);var u=t(3078);var d=t(3079);var f=t(3080);var m=t(2315);var p=t(3081);var g=t(3082);var S=t(2486);var h=t(3083);var T=t(3084);var v=t(3085)},40:function(e,n,t){"use strict";n.__esModule=true;var o=t(275);var r=l(o);var a=t(288);var i=l(a);var s="function"===typeof i.default&&"symbol"===typeof r.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function l(e){return e&&e.__esModule?e:{default:e}}n.default="function"===typeof i.default&&"symbol"===s(r.default)?function(e){return"undefined"===typeof e?"undefined":s(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":s(e)}},412:function(e,n,t){e.exports={default:t(434),__esModule:true}},43:function(e,n,t){var o=t(109)("wks");var r=t(91);var a=t(46).Symbol;var i="function"==typeof a;var s=e.exports=function(e){return o[e]||(o[e]=i&&a[e]||(i?a:r)("Symbol."+e))};s.store=o},434:function(e,n,t){t(125);t(435);e.exports=t(52).Array.from},435:function(e,n,t){"use strict";var o=t(146);var r=t(86);var a=t(120);var i=t(436);var s=t(437);var l=t(154);var c=t(438);var _=t(215);r(r.S+r.F*!t(439)(function(e){Array.from(e)}),"Array",{from:function e(n){var t=a(n);var r="function"==typeof this?this:Array;var u=arguments.length;var d=u>1?arguments[1]:void 0;var f=void 0!==d;var m=0;var p=_(t);var g,S,h,T;f&&(d=o(d,u>2?arguments[2]:void 0,2));if(void 0==p||r==Array&&s(p)){g=l(t.length);for(S=new r(g);g>m;m++)c(S,m,f?d(t[m],m):t[m])}else for(T=p.call(t),S=new r;!(h=T.next()).done;m++)c(S,m,f?i(T,d,[h.value,m],true):h.value);S.length=m;return S}})},436:function(e,n,t){var o=t(71);e.exports=function(e,n,t,r){try{return r?n(o(t)[0],t[1]):n(t)}catch(n){var a=e["return"];void 0!==a&&o(a.call(e));throw n}}},437:function(e,n,t){var o=t(80);var r=t(43)("iterator");var a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[r]===e)}},438:function(e,n,t){"use strict";var o=t(58);var r=t(83);e.exports=function(e,n,t){n in e?o.f(e,n,r(0,t)):e[n]=t}},439:function(e,n,t){var o=t(43)("iterator");var r=false;try{var a=[7][o]();a["return"]=function(){r=true};Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,n){if(!n&&!r)return false;var t=false;try{var a=[7];var i=a[o]();i.next=function(){return{done:t=true}};a[o]=function(){return i};e(a)}catch(e){}return t}},46:function(e,n){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},52:function(e,n){var t=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=t)},56:function(e,n,t){e.exports=!t(73)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},58:function(e,n,t){var o=t(71);var r=t(136);var a=t(115);var i=Object.defineProperty;n.f=t(56)?Object.defineProperty:function e(n,t,s){o(n);t=a(t,true);o(s);if(r)try{return i(n,t,s)}catch(e){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");"value"in s&&(n[t]=s.value);return n}},60:function(e,n){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},64:function(e,n,t){var o=t(58);var r=t(83);e.exports=t(56)?function(e,n,t){return o.f(e,n,r(1,t))}:function(e,n,t){e[n]=t;return e}},66:function(e,n,t){var o=t(133);var r=t(96);e.exports=function(e){return o(r(e))}},68:function(e,n){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},71:function(e,n,t){var o=t(68);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},73:function(e,n){e.exports=function(e){try{return!!e()}catch(e){return true}}},80:function(e,n){e.exports={}},83:function(e,n){e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},86:function(e,n,t){var o=t(46);var r=t(52);var a=t(146);var i=t(64);var s="prototype";var l=function(e,n,t){var c=e&l.F;var _=e&l.G;var u=e&l.S;var d=e&l.P;var f=e&l.B;var m=e&l.W;var p=_?r:r[n]||(r[n]={});var g=p[s];var S=_?o:u?o[n]:(o[n]||{})[s];var h,T,v;_&&(t=n);for(h in t){T=!c&&S&&void 0!==S[h];if(T&&h in p)continue;v=T?S[h]:t[h];p[h]=_&&"function"!=typeof S[h]?t[h]:f&&T?a(v,o):m&&S[h]==v?function(e){var n=function(n,t,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,t)}return new e(n,t,o)}return e.apply(this,arguments)};n[s]=e[s];return n}(v):d&&"function"==typeof v?a(Function.call,v):v;if(d){(p.virtual||(p.virtual={}))[h]=v;e&l.R&&g&&!g[h]&&i(g,h,v)}}};l.F=1;l.G=2;l.S=4;l.P=8;l.B=16;l.W=32;l.U=64;l.R=128;e.exports=l},91:function(e,n){var t=0;var o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+o).toString(36))}},95:function(e,n){var t=Math.ceil;var o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:t)(e)}},96:function(e,n){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},98:function(e,n,t){var o=t(137);var r=t(110);e.exports=Object.keys||function e(n){return o(n,r)}}},[[3693,0]]]);